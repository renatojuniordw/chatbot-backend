'use strict';
const _0x3d3a8e = _0x2640;
function _0x5b65() {
    const _0x537619 = [
        'user',
        'distinct',
        'between',
        'apgSG',
        'vices/Show',
        'sWqjZ',
        '__importDe',
        'value',
        'true',
        'UserServic',
        'vQMVg',
        'whatsapp',
        '../UserSer',
        'trim',
        'findAll',
        'ls/Message',
        '2PkKOWN',
        'unreadMess',
        'fault',
        'wonhj',
        '../../mode',
        'offset',
        'oEnMJ',
        'include',
        '675048rooLUQ',
        'push',
        'where',
        'toLocaleLo',
        'werCase',
        '72vZXuvQ',
        'status',
        'nVWnH',
        'CGCHH',
        'ls/User',
        'startOfDay',
        'messages',
        'model',
        'ls/Whatsap',
        'SeiEv',
        '4660843JfAjlD',
        'pending',
        'defineProp',
        'EdVSt',
        'findAndCou',
        'tickets',
        'tagId',
        'ls/Contact',
        '3107874CLtwvV',
        'body',
        'endOfDay',
        'ls/Ticket',
        'hasMore',
        'number',
        '__esModule',
        'intersecti',
        'parseISO',
        'contact.na',
        'WwBBR',
        'contact',
        'LBLUI',
        'wUwGE',
        'VntUU',
        'isArray',
        'mayQH',
        'UIuPt',
        'length',
        'lodash',
        '6522hPsloy',
        'tags',
        'ryBEo',
        'erty',
        'userId',
        'email',
        '54JyquGY',
        'count',
        'date-fns',
        '4085znZfZg',
        'LOWER',
        'JqBXl',
        'DEcEE',
        'color',
        'limit',
        'queue',
        '9394800InJZJt',
        'ls/Queue',
        'cMOSu',
        '259648QNfeAK',
        '10tOaDNG',
        'queues',
        'subQuery',
        'ticketId',
        'ntAll',
        'ls/TicketT',
        'upglz',
        'LIKE',
        'VULoR',
        'order',
        'ZUJXW',
        'map',
        'ages',
        'name',
        'default',
        'updatedAt',
        'like',
        'aiNXv',
        'queueId',
        'AWoWR',
        'ls/Tag',
        'attributes',
        'open',
        'PHzok',
        '78448IbZmnB',
        'col',
        'DESC',
        'sequelize'
    ];
    _0x5b65 = function () {
        return _0x537619;
    };
    return _0x5b65();
}
function _0x2640(_0x4bb8f2, _0x4d3d32) {
    const _0x164041 = _0x5b65();
    return _0x2640 = function (_0x1e721f, _0x38919f) {
        _0x1e721f = _0x1e721f - (-0x3 * 0x227 + 0x1f82 + -0x17b4);
        let _0x1168ac = _0x164041[_0x1e721f];
        return _0x1168ac;
    }, _0x2640(_0x4bb8f2, _0x4d3d32);
}
(function (_0x2a1da4, _0x20250a) {
    const _0x2f7ddb = _0x2640, _0x18929e = _0x2a1da4();
    while (!![]) {
        try {
            const _0x1db22c = -parseInt(_0x2f7ddb(0x1c5)) / (-0x1 * 0x2111 + -0x7e6 * 0x2 + 0x825 * 0x6) * (-parseInt(_0x2f7ddb(0x17f)) / (0xb5d + -0xe6 * -0x26 + -0x13 * 0x265)) + parseInt(_0x2f7ddb(0x1b8)) / (-0x1195 + -0xa9a + 0x1 * 0x1c32) * (-parseInt(_0x2f7ddb(0x16b)) / (0x119 * 0xb + 0x9 * -0x455 + 0x1aee)) + -parseInt(_0x2f7ddb(0x1bb)) / (0x7d + -0x1a5 * 0x1 + 0x2b * 0x7) * (parseInt(_0x2f7ddb(0x1b2)) / (-0xa48 + -0x121d + 0x61 * 0x4b)) + parseInt(_0x2f7ddb(0x19e)) / (-0xd * 0xf2 + 0x167b + -0xa2a) + -parseInt(_0x2f7ddb(0x187)) / (0x108d + 0x394 * 0x4 + -0x1ed5) * (-parseInt(_0x2f7ddb(0x18c)) / (0xbff + -0x824 + -0x3d2)) + -parseInt(_0x2f7ddb(0x1c6)) / (-0x1e0d + 0x13 * 0x1de + -0x563) * (parseInt(_0x2f7ddb(0x196)) / (0x1ab2 + -0xb2e + -0xf79)) + parseInt(_0x2f7ddb(0x1c2)) / (-0x2 * 0x1381 + -0xb9 * 0x35 + 0x4d5b);
            if (_0x1db22c === _0x20250a)
                break;
            else
                _0x18929e['push'](_0x18929e['shift']());
        } catch (_0x1a7631) {
            _0x18929e['push'](_0x18929e['shift']());
        }
    }
}(_0x5b65, -0x345a3 + -0xab47f + 0x3 * 0x72f8c));
var __importDefault = this && this[_0x3d3a8e(0x175) + _0x3d3a8e(0x181)] || function (_0x28a0cd) {
    const _0x2c9181 = _0x3d3a8e;
    return _0x28a0cd && _0x28a0cd[_0x2c9181(0x1a4)] ? _0x28a0cd : { 'default': _0x28a0cd };
};
const _0x1fd8cb = {};
_0x1fd8cb[_0x3d3a8e(0x176)] = !![], Object[_0x3d3a8e(0x198) + _0x3d3a8e(0x1b5)](exports, _0x3d3a8e(0x1a4), _0x1fd8cb);
const sequelize_1 = require(_0x3d3a8e(0x16e)), date_fns_1 = require(_0x3d3a8e(0x1ba)), Ticket_1 = __importDefault(require(_0x3d3a8e(0x183) + _0x3d3a8e(0x1a1))), Contact_1 = __importDefault(require(_0x3d3a8e(0x183) + _0x3d3a8e(0x19d))), Message_1 = __importDefault(require(_0x3d3a8e(0x183) + _0x3d3a8e(0x17e))), Queue_1 = __importDefault(require(_0x3d3a8e(0x183) + _0x3d3a8e(0x1c3))), User_1 = __importDefault(require(_0x3d3a8e(0x183) + _0x3d3a8e(0x190))), ShowUserService_1 = __importDefault(require(_0x3d3a8e(0x17b) + _0x3d3a8e(0x173) + _0x3d3a8e(0x178) + 'e')), Tag_1 = __importDefault(require(_0x3d3a8e(0x183) + _0x3d3a8e(0x167))), TicketTag_1 = __importDefault(require(_0x3d3a8e(0x183) + _0x3d3a8e(0x1cb) + 'ag')), lodash_1 = require(_0x3d3a8e(0x1b1)), Whatsapp_1 = __importDefault(require(_0x3d3a8e(0x183) + _0x3d3a8e(0x194) + 'p')), ListTicketsServiceKanban = async ({
        searchParam: searchParam = '',
        pageNumber: pageNumber = '1',
        queueIds: _0x24657c,
        tags: _0x36147f,
        users: _0x5d7be1,
        status: _0x13c7f8,
        date: _0x235bc6,
        updatedAt: _0x1db1b4,
        showAll: _0x12d431,
        userId: _0x5e9e51,
        withUnreadMessages: _0x36fc66,
        companyId: _0x49a1f5
    }) => {
        const _0xc7a473 = _0x3d3a8e, _0x1cadbe = {};
        _0x1cadbe[_0xc7a473(0x195)] = _0xc7a473(0x197), _0x1cadbe[_0xc7a473(0x1af)] = _0xc7a473(0x1a9), _0x1cadbe[_0xc7a473(0x1ac)] = _0xc7a473(0x160), _0x1cadbe[_0xc7a473(0x1b4)] = _0xc7a473(0x1a3), _0x1cadbe[_0xc7a473(0x182)] = _0xc7a473(0x1b7), _0x1cadbe[_0xc7a473(0x172)] = _0xc7a473(0x1c1), _0x1cadbe[_0xc7a473(0x1a8)] = _0xc7a473(0x1bf), _0x1cadbe[_0xc7a473(0x15d)] = _0xc7a473(0x16f), _0x1cadbe[_0xc7a473(0x18f)] = _0xc7a473(0x1b3), _0x1cadbe[_0xc7a473(0x1bd)] = _0xc7a473(0x17a), _0x1cadbe[_0xc7a473(0x164)] = function (_0x3e6dcc, _0x51666b) {
            return _0x3e6dcc === _0x51666b;
        }, _0x1cadbe[_0xc7a473(0x1ae)] = _0xc7a473(0x177), _0x1cadbe[_0xc7a473(0x15b)] = _0xc7a473(0x169), _0x1cadbe[_0xc7a473(0x16a)] = _0xc7a473(0x192), _0x1cadbe[_0xc7a473(0x18e)] = _0xc7a473(0x19f), _0x1cadbe[_0xc7a473(0x199)] = _0xc7a473(0x1bc), _0x1cadbe[_0xc7a473(0x179)] = _0xc7a473(0x15a), _0x1cadbe[_0xc7a473(0x1aa)] = _0xc7a473(0x1a7) + 'me', _0x1cadbe[_0xc7a473(0x1ab)] = function (_0x16d090, _0x19b2eb) {
            return _0x16d090 > _0x19b2eb;
        }, _0x1cadbe[_0xc7a473(0x166)] = function (_0x53263a, _0x5a5f93) {
            return _0x53263a * _0x5a5f93;
        }, _0x1cadbe[_0xc7a473(0x185)] = function (_0x175734, _0x4754fb) {
            return _0x175734 - _0x4754fb;
        }, _0x1cadbe[_0xc7a473(0x159)] = _0xc7a473(0x162), _0x1cadbe[_0xc7a473(0x174)] = _0xc7a473(0x16d), _0x1cadbe[_0xc7a473(0x1c4)] = function (_0x2acbb5, _0x4df1fb) {
            return _0x2acbb5 > _0x4df1fb;
        }, _0x1cadbe[_0xc7a473(0x1be)] = function (_0x44572, _0x36e0f4) {
            return _0x44572 + _0x36e0f4;
        };
        const _0x34acbb = _0x1cadbe, _0x3ddc13 = {};
        _0x3ddc13[_0xc7a473(0x1b6)] = _0x5e9e51;
        const _0xfc5ae = {};
        _0xfc5ae[_0xc7a473(0x18d)] = _0x34acbb[_0xc7a473(0x195)];
        const _0x51d6e0 = {
            [sequelize_1['Op']['or']]: [
                _0x3ddc13,
                _0xfc5ae
            ]
        };
        _0x51d6e0[_0xc7a473(0x165)] = {
            [sequelize_1['Op']['or']]: [
                _0x24657c,
                null
            ]
        };
        let _0x250bf9 = _0x51d6e0, _0x1bc66d;
        const _0x454dd2 = {};
        _0x454dd2[_0xc7a473(0x193)] = Contact_1[_0xc7a473(0x161)], _0x454dd2['as'] = _0x34acbb[_0xc7a473(0x1af)], _0x454dd2[_0xc7a473(0x168)] = [
            'id',
            _0x34acbb[_0xc7a473(0x1ac)],
            _0x34acbb[_0xc7a473(0x1b4)],
            _0x34acbb[_0xc7a473(0x182)]
        ];
        const _0xaaabbb = {};
        _0xaaabbb[_0xc7a473(0x193)] = Queue_1[_0xc7a473(0x161)], _0xaaabbb['as'] = _0x34acbb[_0xc7a473(0x172)], _0xaaabbb[_0xc7a473(0x168)] = [
            'id',
            _0x34acbb[_0xc7a473(0x1ac)],
            _0x34acbb[_0xc7a473(0x1a8)]
        ];
        const _0x2a458e = {};
        _0x2a458e[_0xc7a473(0x193)] = User_1[_0xc7a473(0x161)], _0x2a458e['as'] = _0x34acbb[_0xc7a473(0x15d)], _0x2a458e[_0xc7a473(0x168)] = [
            'id',
            _0x34acbb[_0xc7a473(0x1ac)]
        ];
        const _0x53285d = {};
        _0x53285d[_0xc7a473(0x193)] = Tag_1[_0xc7a473(0x161)], _0x53285d['as'] = _0x34acbb[_0xc7a473(0x18f)], _0x53285d[_0xc7a473(0x168)] = [
            'id',
            _0x34acbb[_0xc7a473(0x1ac)],
            _0x34acbb[_0xc7a473(0x1a8)]
        ];
        const _0x5300a8 = {};
        _0x5300a8[_0xc7a473(0x193)] = Whatsapp_1[_0xc7a473(0x161)], _0x5300a8['as'] = _0x34acbb[_0xc7a473(0x1bd)], _0x5300a8[_0xc7a473(0x168)] = [_0x34acbb[_0xc7a473(0x1ac)]], _0x1bc66d = [
            _0x454dd2,
            _0xaaabbb,
            _0x2a458e,
            _0x53285d,
            _0x5300a8
        ];
        if (_0x34acbb[_0xc7a473(0x164)](_0x12d431, _0x34acbb[_0xc7a473(0x1ae)])) {
            const _0x44ac24 = {
                    [sequelize_1['Op']['or']]: [
                        _0x24657c,
                        null
                    ]
                }, _0x493671 = {};
            _0x493671[_0xc7a473(0x165)] = _0x44ac24, _0x250bf9 = _0x493671;
        }
        const _0x3e680a = {
            [sequelize_1['Op']['or']]: [
                _0x34acbb[_0xc7a473(0x195)],
                _0x34acbb[_0xc7a473(0x15b)]
            ]
        };
        _0x250bf9 = {
            ..._0x250bf9,
            'status': _0x3e680a
        };
        if (searchParam) {
            const _0x562ee1 = searchParam[_0xc7a473(0x18a) + _0xc7a473(0x18b)]()[_0xc7a473(0x17c)]();
            _0x1bc66d = [
                ..._0x1bc66d,
                {
                    'model': Message_1[_0xc7a473(0x161)],
                    'as': _0x34acbb[_0xc7a473(0x16a)],
                    'attributes': [
                        'id',
                        _0x34acbb[_0xc7a473(0x18e)]
                    ],
                    'where': { 'body': (0x433 + 0x9 * -0x2bd + -0x1 * -0x1472, sequelize_1[_0xc7a473(0x189)])((-0x7f7 * -0x3 + -0x440 * -0x1 + -0x5a1 * 0x5, sequelize_1['fn'])(_0x34acbb[_0xc7a473(0x199)], (-0x17d1 + 0xe3c + 0x995, sequelize_1[_0xc7a473(0x16c)])(_0x34acbb[_0xc7a473(0x18e)])), _0x34acbb[_0xc7a473(0x179)], '%' + _0x562ee1 + '%') },
                    'required': ![],
                    'duplicating': ![]
                }
            ], _0x250bf9 = {
                ..._0x250bf9,
                [sequelize_1['Op']['or']]: [
                    { '$contact.name$': (-0x12b6 * 0x1 + 0xfc8 + 0x2ee, sequelize_1[_0xc7a473(0x189)])((-0xdf2 + 0x16b7 * -0x1 + 0x24a9, sequelize_1['fn'])(_0x34acbb[_0xc7a473(0x199)], (-0x1af * 0x1 + -0x1bf7 + 0x1da6, sequelize_1[_0xc7a473(0x16c)])(_0x34acbb[_0xc7a473(0x1aa)])), _0x34acbb[_0xc7a473(0x179)], '%' + _0x562ee1 + '%') },
                    { '$contact.number$': { [sequelize_1['Op'][_0xc7a473(0x163)]]: '%' + _0x562ee1 + '%' } },
                    { '$message.body$': (0xd91 + 0x1cfe + -0x5 * 0x883, sequelize_1[_0xc7a473(0x189)])((-0x3 * 0x17e + 0x14a4 + -0x815 * 0x2, sequelize_1['fn'])(_0x34acbb[_0xc7a473(0x199)], (0xe72 + 0x23b1 * 0x1 + -0x3223, sequelize_1[_0xc7a473(0x16c)])(_0x34acbb[_0xc7a473(0x18e)])), _0x34acbb[_0xc7a473(0x179)], '%' + _0x562ee1 + '%') }
                ]
            };
        }
        _0x235bc6 && (_0x250bf9 = {
            'createdAt': {
                [sequelize_1['Op'][_0xc7a473(0x171)]]: [
                    +(-0x2508 + 0x1 * 0xb23 + 0x19e5, date_fns_1[_0xc7a473(0x191)])((0x619 + -0x1 * 0x989 + 0x370, date_fns_1[_0xc7a473(0x1a6)])(_0x235bc6)),
                    +(-0x12c2 * -0x2 + 0x1 * -0xdb5 + -0x17cf, date_fns_1[_0xc7a473(0x1a0)])((0xce5 + 0x2 * 0x883 + 0x45 * -0x6f, date_fns_1[_0xc7a473(0x1a6)])(_0x235bc6))
                ]
            }
        });
        _0x1db1b4 && (_0x250bf9 = {
            'updatedAt': {
                [sequelize_1['Op'][_0xc7a473(0x171)]]: [
                    +(-0x1 * -0x2207 + 0x1 * -0x1fe1 + 0x5 * -0x6e, date_fns_1[_0xc7a473(0x191)])((0x34 * 0x6b + -0x2 * 0x97d + 0x161 * -0x2, date_fns_1[_0xc7a473(0x1a6)])(_0x1db1b4)),
                    +(-0xff5 + 0x2547 + 0x1552 * -0x1, date_fns_1[_0xc7a473(0x1a0)])((-0x1dcb + 0x1 * -0xe5d + 0x2c28, date_fns_1[_0xc7a473(0x1a6)])(_0x1db1b4))
                ]
            }
        });
        if (_0x34acbb[_0xc7a473(0x164)](_0x36fc66, _0x34acbb[_0xc7a473(0x1ae)])) {
            const _0x40e6e6 = await (-0xedd * -0x2 + 0xd33 + 0xb * -0x3e7, ShowUserService_1[_0xc7a473(0x161)])(_0x5e9e51), _0x1fe2cc = _0x40e6e6[_0xc7a473(0x1c7)][_0xc7a473(0x15e)](_0x312dee => _0x312dee['id']), _0x367488 = {};
            _0x367488[_0xc7a473(0x1b6)] = _0x5e9e51;
            const _0x3d1967 = {};
            _0x3d1967[_0xc7a473(0x18d)] = _0x34acbb[_0xc7a473(0x195)];
            const _0x4136b6 = {
                [sequelize_1['Op']['or']]: [
                    _0x367488,
                    _0x3d1967
                ]
            };
            _0x4136b6[_0xc7a473(0x165)] = {
                [sequelize_1['Op']['or']]: [
                    _0x1fe2cc,
                    null
                ]
            }, _0x4136b6[_0xc7a473(0x180) + _0xc7a473(0x15f)] = { [sequelize_1['Op']['gt']]: 0x2056 + -0x67 * 0x10 + 0xf * -0x1ba }, _0x250bf9 = _0x4136b6;
        }
        if (Array[_0xc7a473(0x1ad)](_0x36147f) && _0x34acbb[_0xc7a473(0x1ab)](_0x36147f[_0xc7a473(0x1b0)], 0x3a * 0x2f + 0x10 * -0x23 + -0x876)) {
            const _0x27a6ab = [];
            for (let _0x328ffd of _0x36147f) {
                const _0x4424bf = {};
                _0x4424bf[_0xc7a473(0x19c)] = _0x328ffd;
                const _0x107c70 = {};
                _0x107c70[_0xc7a473(0x189)] = _0x4424bf;
                const _0x9f9220 = await TicketTag_1[_0xc7a473(0x161)][_0xc7a473(0x17d)](_0x107c70);
                _0x9f9220 && _0x27a6ab[_0xc7a473(0x188)](_0x9f9220[_0xc7a473(0x15e)](_0x1f077d => _0x1f077d[_0xc7a473(0x1c9)]));
            }
            const _0x459f3f = (-0x24db + -0xb78 + -0x1 * -0x3053, lodash_1[_0xc7a473(0x1a5) + 'on'])(..._0x27a6ab), _0xcbc4d0 = { [sequelize_1['Op']['in']]: _0x459f3f };
            _0x250bf9 = {
                ..._0x250bf9,
                'id': _0xcbc4d0
            };
        }
        if (Array[_0xc7a473(0x1ad)](_0x5d7be1) && _0x34acbb[_0xc7a473(0x1ab)](_0x5d7be1[_0xc7a473(0x1b0)], 0x32b * -0x7 + -0x17a7 * 0x1 + -0x2 * -0x16ea)) {
            const _0x1767ea = [];
            for (let _0x91c755 of _0x5d7be1) {
                const _0x13fd5b = {};
                _0x13fd5b[_0xc7a473(0x1b6)] = _0x91c755;
                const _0x2f81a6 = {};
                _0x2f81a6[_0xc7a473(0x189)] = _0x13fd5b;
                const _0x12bb75 = await Ticket_1[_0xc7a473(0x161)][_0xc7a473(0x17d)](_0x2f81a6);
                _0x12bb75 && _0x1767ea[_0xc7a473(0x188)](_0x12bb75[_0xc7a473(0x15e)](_0x4794bc => _0x4794bc['id']));
            }
            const _0x1e589d = (0x657 + 0x1d4a + -0x23a1, lodash_1[_0xc7a473(0x1a5) + 'on'])(..._0x1767ea), _0x180130 = { [sequelize_1['Op']['in']]: _0x1e589d };
            _0x250bf9 = {
                ..._0x250bf9,
                'id': _0x180130
            };
        }
        const _0x2d1c09 = -0x3 * -0x1f1 + -0x398 * -0x1 + 0x943 * -0x1, _0xb50a5a = _0x34acbb[_0xc7a473(0x166)](_0x2d1c09, _0x34acbb[_0xc7a473(0x185)](+pageNumber, 0x1417 + 0x1ce2 + 0xc3e * -0x4));
        _0x250bf9 = {
            ..._0x250bf9,
            'companyId': _0x49a1f5
        };
        const _0x1c3ee4 = {};
        _0x1c3ee4[_0xc7a473(0x189)] = _0x250bf9, _0x1c3ee4[_0xc7a473(0x186)] = _0x1bc66d, _0x1c3ee4[_0xc7a473(0x170)] = !![], _0x1c3ee4[_0xc7a473(0x1c0)] = _0x2d1c09, _0x1c3ee4[_0xc7a473(0x184)] = _0xb50a5a, _0x1c3ee4[_0xc7a473(0x15c)] = [[
                _0x34acbb[_0xc7a473(0x159)],
                _0x34acbb[_0xc7a473(0x174)]
            ]], _0x1c3ee4[_0xc7a473(0x1c8)] = ![];
        const {
                count: _0xa32a22,
                rows: _0x440f81
            } = await Ticket_1[_0xc7a473(0x161)][_0xc7a473(0x19a) + _0xc7a473(0x1ca)](_0x1c3ee4), _0x28d9dc = _0x34acbb[_0xc7a473(0x1c4)](_0xa32a22, _0x34acbb[_0xc7a473(0x1be)](_0xb50a5a, _0x440f81[_0xc7a473(0x1b0)])), _0x27ba56 = {};
        return _0x27ba56[_0xc7a473(0x19b)] = _0x440f81, _0x27ba56[_0xc7a473(0x1b9)] = _0xa32a22, _0x27ba56[_0xc7a473(0x1a2)] = _0x28d9dc, _0x27ba56;
    };
exports[_0x3d3a8e(0x161)] = ListTicketsServiceKanban;