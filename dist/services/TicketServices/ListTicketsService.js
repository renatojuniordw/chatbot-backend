'use strict';
function _0x3ce3() {
    const _0x4eb980 = [
        'between',
        'sequelize',
        'defineProp',
        'startOfDay',
        'ls/Whatsap',
        '__esModule',
        'contact.na',
        'order',
        'werCase',
        'toLocaleLo',
        'parseISO',
        'length',
        '../../mode',
        'YJaos',
        'ls/Ticket',
        'date-fns',
        'unreadMess',
        '138EYdgvR',
        'color',
        'true',
        'messages',
        'ntAll',
        'lodash',
        'LNHNl',
        'zfbAO',
        'pending',
        'LIKE',
        'offset',
        '435773UVRvUe',
        'qmwnx',
        'queueId',
        '9746864wLWQbm',
        'endOfDay',
        'HyHkl',
        'profilePic',
        'LOWER',
        'sPREe',
        'AqDdt',
        'number',
        'YedJM',
        '575350IZCzWp',
        'tickets',
        'ZaMqR',
        'count',
        'LQIPp',
        'vices/Show',
        'xxcNb',
        'map',
        'uhpPo',
        'DESC',
        'fault',
        'value',
        'ls/User',
        'erty',
        'body',
        'ls/Tag',
        'findAndCou',
        'where',
        'Ehaou',
        'ls/Queue',
        'ls/Message',
        '__importDe',
        'ebuNM',
        'user',
        'like',
        'tagId',
        'intersecti',
        '39452ObdFKk',
        'model',
        'findAll',
        'bDmrs',
        'distinct',
        'default',
        'hDJwE',
        '../UserSer',
        'IexsN',
        'zFFvd',
        'include',
        'attributes',
        'contact',
        'QddSM',
        'cLRNL',
        'limit',
        'email',
        '9EQrtXd',
        'JpXat',
        'push',
        'userId',
        'ls/TicketT',
        'fTtBI',
        'LhsjP',
        'col',
        '255455QvnoZS',
        'ls/Contact',
        'tags',
        'UserServic',
        'whatsapp',
        'queues',
        'ticketId',
        'tdcZG',
        '690981yYeYhc',
        'trim',
        'subQuery',
        'hasMore',
        'isArray',
        'updatedAt',
        'queue',
        'status',
        'Url',
        'eJlkn',
        'ages',
        '2257888rBMXZC',
        'name'
    ];
    _0x3ce3 = function () {
        return _0x4eb980;
    };
    return _0x3ce3();
}
function _0x4484(_0x558095, _0x5dceb8) {
    const _0x5007d3 = _0x3ce3();
    return _0x4484 = function (_0xc9769, _0x128f18) {
        _0xc9769 = _0xc9769 - (0x1 * 0x1835 + 0x1e04 + 0x53f * -0xa);
        let _0x22d9bb = _0x5007d3[_0xc9769];
        return _0x22d9bb;
    }, _0x4484(_0x558095, _0x5dceb8);
}
const _0xdebd94 = _0x4484;
(function (_0x167684, _0x52d76a) {
    const _0x438b28 = _0x4484, _0xf76d3b = _0x167684();
    while (!![]) {
        try {
            const _0x1d9bde = -parseInt(_0x438b28(0x22e)) / (0x22c2 + -0x16f * -0xb + -0x2 * 0x1943) + -parseInt(_0x438b28(0x1c9)) / (0x205 * -0x7 + -0x18c1 * -0x1 + -0xe * 0xc2) + parseInt(_0x438b28(0x205)) / (-0x2515 + -0x253d + -0x18c7 * -0x3) + -parseInt(_0x438b28(0x210)) / (-0x10df * 0x2 + 0x12a0 * 0x2 + -0x37e) + parseInt(_0x438b28(0x1fd)) / (0x1 * 0x1032 + -0x439 + 0x5a * -0x22) + parseInt(_0x438b28(0x223)) / (-0x299 + -0x1 * -0x1f5f + 0x4 * -0x730) * (parseInt(_0x438b28(0x1e4)) / (-0x1549 * 0x1 + 0x1815 + 0x2c5 * -0x1)) + -parseInt(_0x438b28(0x231)) / (0x1c0f + -0x1d4c + -0x145 * -0x1) * (-parseInt(_0x438b28(0x1f5)) / (-0x169f + 0x2491 + -0xde9));
            if (_0x1d9bde === _0x52d76a)
                break;
            else
                _0xf76d3b['push'](_0xf76d3b['shift']());
        } catch (_0x3e74c7) {
            _0xf76d3b['push'](_0xf76d3b['shift']());
        }
    }
}(_0x3ce3, 0x52385 + 0x8b96 + 0x17f * -0x51));
var __importDefault = this && this[_0xdebd94(0x1de) + _0xdebd94(0x1d3)] || function (_0x5597bf) {
    const _0x4f792b = _0xdebd94;
    return _0x5597bf && _0x5597bf[_0x4f792b(0x217)] ? _0x5597bf : { 'default': _0x5597bf };
};
const _0x8861f0 = {};
_0x8861f0[_0xdebd94(0x1d4)] = !![], Object[_0xdebd94(0x214) + _0xdebd94(0x1d6)](exports, _0xdebd94(0x217), _0x8861f0);
const sequelize_1 = require(_0xdebd94(0x213)), date_fns_1 = require(_0xdebd94(0x221)), Ticket_1 = __importDefault(require(_0xdebd94(0x21e) + _0xdebd94(0x220))), Contact_1 = __importDefault(require(_0xdebd94(0x21e) + _0xdebd94(0x1fe))), Message_1 = __importDefault(require(_0xdebd94(0x21e) + _0xdebd94(0x1dd))), Queue_1 = __importDefault(require(_0xdebd94(0x21e) + _0xdebd94(0x1dc))), User_1 = __importDefault(require(_0xdebd94(0x21e) + _0xdebd94(0x1d5))), ShowUserService_1 = __importDefault(require(_0xdebd94(0x1eb) + _0xdebd94(0x1ce) + _0xdebd94(0x200) + 'e')), Tag_1 = __importDefault(require(_0xdebd94(0x21e) + _0xdebd94(0x1d8))), TicketTag_1 = __importDefault(require(_0xdebd94(0x21e) + _0xdebd94(0x1f9) + 'ag')), lodash_1 = require(_0xdebd94(0x228)), Whatsapp_1 = __importDefault(require(_0xdebd94(0x21e) + _0xdebd94(0x216) + 'p')), ListTicketsService = async ({
        searchParam: searchParam = '',
        pageNumber: pageNumber = '1',
        queueIds: _0x550025,
        tags: _0x18afc0,
        users: _0x378b7b,
        status: _0x4f1363,
        date: _0x21cf36,
        updatedAt: _0x5aced2,
        showAll: _0x5f2ad2,
        userId: _0x372585,
        withUnreadMessages: _0x10d889,
        companyId: _0x414374
    }) => {
        const _0x2957ea = _0xdebd94, _0x2fbd45 = {};
        _0x2fbd45[_0x2957ea(0x233)] = _0x2957ea(0x22b), _0x2fbd45[_0x2957ea(0x1ea)] = _0x2957ea(0x1f0), _0x2fbd45[_0x2957ea(0x1ec)] = _0x2957ea(0x211), _0x2fbd45[_0x2957ea(0x1f6)] = _0x2957ea(0x1c7), _0x2fbd45[_0x2957ea(0x1e7)] = _0x2957ea(0x1f4), _0x2fbd45[_0x2957ea(0x1c6)] = _0x2957ea(0x1c3) + _0x2957ea(0x20d), _0x2fbd45[_0x2957ea(0x20e)] = _0x2957ea(0x20b), _0x2fbd45[_0x2957ea(0x229)] = _0x2957ea(0x224), _0x2fbd45[_0x2957ea(0x22a)] = _0x2957ea(0x1e0), _0x2fbd45[_0x2957ea(0x1df)] = _0x2957ea(0x1ff), _0x2fbd45[_0x2957ea(0x1db)] = _0x2957ea(0x201), _0x2fbd45[_0x2957ea(0x1c5)] = function (_0x2fb0bb, _0x461f81) {
            return _0x2fb0bb === _0x461f81;
        }, _0x2fbd45[_0x2957ea(0x204)] = _0x2957ea(0x225), _0x2fbd45[_0x2957ea(0x1cb)] = _0x2957ea(0x226), _0x2fbd45[_0x2957ea(0x1ed)] = _0x2957ea(0x1d7), _0x2fbd45[_0x2957ea(0x1cd)] = _0x2957ea(0x1c4), _0x2fbd45[_0x2957ea(0x1fb)] = _0x2957ea(0x22c), _0x2fbd45[_0x2957ea(0x1c8)] = _0x2957ea(0x218) + 'me', _0x2fbd45[_0x2957ea(0x21f)] = function (_0x56c9f4, _0x345d73) {
            return _0x56c9f4 > _0x345d73;
        }, _0x2fbd45[_0x2957ea(0x22f)] = function (_0x12cc44, _0x3e4612) {
            return _0x12cc44 > _0x3e4612;
        }, _0x2fbd45[_0x2957ea(0x1cf)] = function (_0x423033, _0x2f2fe8) {
            return _0x423033 * _0x2f2fe8;
        }, _0x2fbd45[_0x2957ea(0x1d1)] = function (_0x4b8eb5, _0x5555e1) {
            return _0x4b8eb5 - _0x5555e1;
        }, _0x2fbd45[_0x2957ea(0x1f2)] = _0x2957ea(0x20a), _0x2fbd45[_0x2957ea(0x1f1)] = _0x2957ea(0x1d2), _0x2fbd45[_0x2957ea(0x1fa)] = function (_0xe84054, _0x39f6eb) {
            return _0xe84054 + _0x39f6eb;
        };
        const _0x5d0e31 = _0x2fbd45, _0x1a4c5a = {};
        _0x1a4c5a[_0x2957ea(0x1f8)] = _0x372585;
        const _0x480c40 = {};
        _0x480c40[_0x2957ea(0x20c)] = _0x5d0e31[_0x2957ea(0x233)];
        const _0x476f25 = {
            [sequelize_1['Op']['or']]: [
                _0x1a4c5a,
                _0x480c40
            ]
        };
        _0x476f25[_0x2957ea(0x230)] = {
            [sequelize_1['Op']['or']]: [
                _0x550025,
                null
            ]
        };
        let _0x3c762c = _0x476f25, _0x118361;
        const _0x17053a = {};
        _0x17053a[_0x2957ea(0x1e5)] = Contact_1[_0x2957ea(0x1e9)], _0x17053a['as'] = _0x5d0e31[_0x2957ea(0x1ea)], _0x17053a[_0x2957ea(0x1ef)] = [
            'id',
            _0x5d0e31[_0x2957ea(0x1ec)],
            _0x5d0e31[_0x2957ea(0x1f6)],
            _0x5d0e31[_0x2957ea(0x1e7)],
            _0x5d0e31[_0x2957ea(0x1c6)]
        ];
        const _0x3a51ad = {};
        _0x3a51ad[_0x2957ea(0x1e5)] = Queue_1[_0x2957ea(0x1e9)], _0x3a51ad['as'] = _0x5d0e31[_0x2957ea(0x20e)], _0x3a51ad[_0x2957ea(0x1ef)] = [
            'id',
            _0x5d0e31[_0x2957ea(0x1ec)],
            _0x5d0e31[_0x2957ea(0x229)]
        ];
        const _0xbeedbe = {};
        _0xbeedbe[_0x2957ea(0x1e5)] = User_1[_0x2957ea(0x1e9)], _0xbeedbe['as'] = _0x5d0e31[_0x2957ea(0x22a)], _0xbeedbe[_0x2957ea(0x1ef)] = [
            'id',
            _0x5d0e31[_0x2957ea(0x1ec)]
        ];
        const _0x29589d = {};
        _0x29589d[_0x2957ea(0x1e5)] = Tag_1[_0x2957ea(0x1e9)], _0x29589d['as'] = _0x5d0e31[_0x2957ea(0x1df)], _0x29589d[_0x2957ea(0x1ef)] = [
            'id',
            _0x5d0e31[_0x2957ea(0x1ec)],
            _0x5d0e31[_0x2957ea(0x229)]
        ];
        const _0x10564c = {};
        _0x10564c[_0x2957ea(0x1e5)] = Whatsapp_1[_0x2957ea(0x1e9)], _0x10564c['as'] = _0x5d0e31[_0x2957ea(0x1db)], _0x10564c[_0x2957ea(0x1ef)] = [_0x5d0e31[_0x2957ea(0x1ec)]], _0x118361 = [
            _0x17053a,
            _0x3a51ad,
            _0xbeedbe,
            _0x29589d,
            _0x10564c
        ];
        if (_0x5d0e31[_0x2957ea(0x1c5)](_0x5f2ad2, _0x5d0e31[_0x2957ea(0x204)])) {
            const _0x4d5fe4 = {
                    [sequelize_1['Op']['or']]: [
                        _0x550025,
                        null
                    ]
                }, _0x4b4945 = {};
            _0x4b4945[_0x2957ea(0x230)] = _0x4d5fe4, _0x3c762c = _0x4b4945;
        }
        _0x4f1363 && (_0x3c762c = {
            ..._0x3c762c,
            'status': _0x4f1363
        });
        if (searchParam) {
            const _0x3d4993 = searchParam[_0x2957ea(0x21b) + _0x2957ea(0x21a)]()[_0x2957ea(0x206)]();
            _0x118361 = [
                ..._0x118361,
                {
                    'model': Message_1[_0x2957ea(0x1e9)],
                    'as': _0x5d0e31[_0x2957ea(0x1cb)],
                    'attributes': [
                        'id',
                        _0x5d0e31[_0x2957ea(0x1ed)]
                    ],
                    'where': { 'body': (-0x18ad + 0x22 * -0x123 + 0x1 * 0x3f53, sequelize_1[_0x2957ea(0x1da)])((0x1c83 + -0x424 + 0x185f * -0x1, sequelize_1['fn'])(_0x5d0e31[_0x2957ea(0x1cd)], (0x2 * 0x723 + 0x1cfe + -0x2b44, sequelize_1[_0x2957ea(0x1fc)])(_0x5d0e31[_0x2957ea(0x1ed)])), _0x5d0e31[_0x2957ea(0x1fb)], '%' + _0x3d4993 + '%') },
                    'required': ![],
                    'duplicating': ![]
                }
            ], _0x3c762c = {
                ..._0x3c762c,
                [sequelize_1['Op']['or']]: [
                    { '$contact.name$': (0x3 * 0x1eb + 0x3 * -0x8cb + 0x14a0, sequelize_1[_0x2957ea(0x1da)])((0x672 + -0x869 + -0x1f7 * -0x1, sequelize_1['fn'])(_0x5d0e31[_0x2957ea(0x1cd)], (-0xf7a + 0x2165 + -0x11eb, sequelize_1[_0x2957ea(0x1fc)])(_0x5d0e31[_0x2957ea(0x1c8)])), _0x5d0e31[_0x2957ea(0x1fb)], '%' + _0x3d4993 + '%') },
                    { '$contact.number$': { [sequelize_1['Op'][_0x2957ea(0x1e1)]]: '%' + _0x3d4993 + '%' } },
                    { '$message.body$': (-0x6e8 + -0x49d * -0x3 + -0x6ef, sequelize_1[_0x2957ea(0x1da)])((0xd4e + 0x3 * 0x6cb + -0x1 * 0x21af, sequelize_1['fn'])(_0x5d0e31[_0x2957ea(0x1cd)], (-0x17ba + 0x6fe + -0x12 * -0xee, sequelize_1[_0x2957ea(0x1fc)])(_0x5d0e31[_0x2957ea(0x1ed)])), _0x5d0e31[_0x2957ea(0x1fb)], '%' + _0x3d4993 + '%') }
                ]
            };
        }
        _0x21cf36 && (_0x3c762c = {
            'createdAt': {
                [sequelize_1['Op'][_0x2957ea(0x212)]]: [
                    +(0x9 * 0x223 + 0x1 * 0x1a71 + -0x2dac, date_fns_1[_0x2957ea(0x215)])((-0x5 * -0x70c + 0x13f5 + -0x3731, date_fns_1[_0x2957ea(0x21c)])(_0x21cf36)),
                    +(0x1 * 0x1e68 + 0x6af * -0x5 + -0x303 * -0x1, date_fns_1[_0x2957ea(0x232)])((0x3d * 0x5 + 0x1 * -0x2597 + 0x2466 * 0x1, date_fns_1[_0x2957ea(0x21c)])(_0x21cf36))
                ]
            }
        });
        _0x5aced2 && (_0x3c762c = {
            'updatedAt': {
                [sequelize_1['Op'][_0x2957ea(0x212)]]: [
                    +(0x2f6 + 0x1bd + -0x4b3, date_fns_1[_0x2957ea(0x215)])((0x1 * 0x1d77 + 0x1ef1 + -0x3c68, date_fns_1[_0x2957ea(0x21c)])(_0x5aced2)),
                    +(-0x1ef6 + 0x6c0 + 0x1836, date_fns_1[_0x2957ea(0x232)])((0x1 * -0x221f + 0x8fc * 0x3 + -0x1 * -0x72b, date_fns_1[_0x2957ea(0x21c)])(_0x5aced2))
                ]
            }
        });
        if (_0x5d0e31[_0x2957ea(0x1c5)](_0x10d889, _0x5d0e31[_0x2957ea(0x204)])) {
            const _0x11707a = await (0x210f + 0x61a * 0x3 + 0x5b5 * -0x9, ShowUserService_1[_0x2957ea(0x1e9)])(_0x372585), _0x2ffe5b = _0x11707a[_0x2957ea(0x202)][_0x2957ea(0x1d0)](_0x457e6a => _0x457e6a['id']), _0x28eb28 = {};
            _0x28eb28[_0x2957ea(0x1f8)] = _0x372585;
            const _0x4f8b7f = {};
            _0x4f8b7f[_0x2957ea(0x20c)] = _0x5d0e31[_0x2957ea(0x233)];
            const _0x51db7f = {
                [sequelize_1['Op']['or']]: [
                    _0x28eb28,
                    _0x4f8b7f
                ]
            };
            _0x51db7f[_0x2957ea(0x230)] = {
                [sequelize_1['Op']['or']]: [
                    _0x2ffe5b,
                    null
                ]
            }, _0x51db7f[_0x2957ea(0x222) + _0x2957ea(0x20f)] = { [sequelize_1['Op']['gt']]: 0x2 * -0xee1 + -0x1 * -0x1669 + -0x13 * -0x63 }, _0x3c762c = _0x51db7f;
        }
        if (Array[_0x2957ea(0x209)](_0x18afc0) && _0x5d0e31[_0x2957ea(0x21f)](_0x18afc0[_0x2957ea(0x21d)], -0x47 * 0x4f + 0x1499 + 0x1 * 0x150)) {
            const _0x59bf3e = [];
            for (let _0x3eefa8 of _0x18afc0) {
                const _0x3c144c = {};
                _0x3c144c[_0x2957ea(0x1e2)] = _0x3eefa8;
                const _0x3e0a6c = {};
                _0x3e0a6c[_0x2957ea(0x1da)] = _0x3c144c;
                const _0x1b915d = await TicketTag_1[_0x2957ea(0x1e9)][_0x2957ea(0x1e6)](_0x3e0a6c);
                _0x1b915d && _0x59bf3e[_0x2957ea(0x1f7)](_0x1b915d[_0x2957ea(0x1d0)](_0x1b7e9f => _0x1b7e9f[_0x2957ea(0x203)]));
            }
            const _0xf6c0a0 = (-0x725 * 0x2 + 0x12a5 + -0x45b, lodash_1[_0x2957ea(0x1e3) + 'on'])(..._0x59bf3e), _0x1082eb = { [sequelize_1['Op']['in']]: _0xf6c0a0 };
            _0x3c762c = {
                ..._0x3c762c,
                'id': _0x1082eb
            };
        }
        if (Array[_0x2957ea(0x209)](_0x378b7b) && _0x5d0e31[_0x2957ea(0x22f)](_0x378b7b[_0x2957ea(0x21d)], -0x1 * 0x1988 + -0x593 + 0x1f1b)) {
            const _0x25a141 = [];
            for (let _0x4044a9 of _0x378b7b) {
                const _0xa7ee5c = {};
                _0xa7ee5c[_0x2957ea(0x1f8)] = _0x4044a9;
                const _0x294627 = {};
                _0x294627[_0x2957ea(0x1da)] = _0xa7ee5c;
                const _0x3b9ad6 = await Ticket_1[_0x2957ea(0x1e9)][_0x2957ea(0x1e6)](_0x294627);
                _0x3b9ad6 && _0x25a141[_0x2957ea(0x1f7)](_0x3b9ad6[_0x2957ea(0x1d0)](_0x268a4a => _0x268a4a['id']));
            }
            const _0x126707 = (-0xca5 * -0x1 + 0x3 * -0xa51 + 0xb * 0x1aa, lodash_1[_0x2957ea(0x1e3) + 'on'])(..._0x25a141), _0x186212 = { [sequelize_1['Op']['in']]: _0x126707 };
            _0x3c762c = {
                ..._0x3c762c,
                'id': _0x186212
            };
        }
        const _0x40d860 = 0x103e + 0xafa + -0x1b10 * 0x1, _0x454070 = _0x5d0e31[_0x2957ea(0x1cf)](_0x40d860, _0x5d0e31[_0x2957ea(0x1d1)](+pageNumber, -0x25 * -0x41 + -0xfa4 + 0x640));
        _0x3c762c = {
            ..._0x3c762c,
            'companyId': _0x414374
        };
        const _0x7d95a4 = {};
        _0x7d95a4[_0x2957ea(0x1da)] = _0x3c762c, _0x7d95a4[_0x2957ea(0x1ee)] = _0x118361, _0x7d95a4[_0x2957ea(0x1e8)] = !![], _0x7d95a4[_0x2957ea(0x1f3)] = _0x40d860, _0x7d95a4[_0x2957ea(0x22d)] = _0x454070, _0x7d95a4[_0x2957ea(0x219)] = [[
                _0x5d0e31[_0x2957ea(0x1f2)],
                _0x5d0e31[_0x2957ea(0x1f1)]
            ]], _0x7d95a4[_0x2957ea(0x207)] = ![];
        const {
                count: _0x29ca96,
                rows: _0x559164
            } = await Ticket_1[_0x2957ea(0x1e9)][_0x2957ea(0x1d9) + _0x2957ea(0x227)](_0x7d95a4), _0x576f88 = _0x5d0e31[_0x2957ea(0x21f)](_0x29ca96, _0x5d0e31[_0x2957ea(0x1fa)](_0x454070, _0x559164[_0x2957ea(0x21d)])), _0x254ec8 = {};
        return _0x254ec8[_0x2957ea(0x1ca)] = _0x559164, _0x254ec8[_0x2957ea(0x1cc)] = _0x29ca96, _0x254ec8[_0x2957ea(0x208)] = _0x576f88, _0x254ec8;
    };
exports[_0xdebd94(0x1e9)] = ListTicketsService;