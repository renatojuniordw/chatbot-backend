'use strict';
function _0x2b8a() {
    const _0x35da76 = [
        '__importDe',
        'userId',
        'bisnO',
        'contactId',
        'open',
        '../Whatsap',
        '__esModule',
        'emit',
        '8pkFLaz',
        'pService/S',
        'NKJMJ',
        'NG_TICKET',
        'erty',
        '5856XFxAmC',
        'defineProp',
        'status',
        'getIO',
        'Services/S',
        'ers/CheckC',
        'default',
        '1528PdCQmk',
        'where',
        '14pnEeJJ',
        'kVEMy',
        'eWvOz',
        '2449835wHobLf',
        'TWUfj',
        'ppByUser',
        '../../help',
        '3022800GMuZOE',
        'ERR_CREATI',
        '43526bHZcKY',
        '19270GuYxHs',
        'pService',
        'defaults',
        'ticket',
        'queue',
        '36LmHEIm',
        'ers/GetDef',
        'toString',
        '../../erro',
        '/socket',
        '21aSeXmG',
        'fault',
        'value',
        'Tickets',
        'companyId',
        'Smlgc',
        '9064627EHVYhD',
        'findByPk',
        'queueId',
        'update',
        'aultWhatsA',
        '3282741hrcrAJ',
        'howContact',
        'isGroup',
        'howWhatsAp',
        'contact',
        'ontactOpen',
        'rs/AppErro',
        '../Contact',
        'ls/Ticket',
        '../../mode',
        '6JONeSD',
        'findOrCrea',
        'include',
        'Eswyv',
        'whatsappId',
        'Service',
        '../../libs',
        '90lvQJLT',
        'NXcLR'
    ];
    _0x2b8a = function () {
        return _0x35da76;
    };
    return _0x2b8a();
}
const _0x5575e3 = _0x3362;
(function (_0xb52dd3, _0x184521) {
    const _0x562c67 = _0x3362, _0x4663de = _0xb52dd3();
    while (!![]) {
        try {
            const _0xacedce = parseInt(_0x562c67(0xaf)) / (-0x29c + -0xeda * -0x2 + -0x1b17) * (-parseInt(_0x562c67(0xa4)) / (0x75f + 0x131 * -0xb + 0x5be)) + -parseInt(_0x562c67(0x92)) / (-0xf0 * 0x25 + 0xb1e + 0x1795) * (-parseInt(_0x562c67(0x99)) / (-0xf62 * 0x2 + 0xadc + 0x13ec)) + -parseInt(_0x562c67(0x9e)) / (-0x1385 + -0x2 * -0xdc4 + 0x155 * -0x6) * (parseInt(_0x562c67(0x7c)) / (-0x231e + -0x11d4 + 0x34f8)) + -parseInt(_0x562c67(0xba)) / (-0x893 + -0x95 * -0xf + 0x21 * -0x1) * (-parseInt(_0x562c67(0x8d)) / (0xe3 * 0xe + 0x24d + -0xeaf)) + -parseInt(_0x562c67(0x83)) / (0x1846 + 0x1 * -0x21e4 + -0x161 * -0x7) * (-parseInt(_0x562c67(0xa5)) / (-0x2c7 * -0x6 + 0xd5d * 0x1 + -0x1dfd * 0x1)) + parseInt(_0x562c67(0xa2)) / (-0x2436 + 0xb4f * -0x3 + 0x462e) * (parseInt(_0x562c67(0xaa)) / (0x1b1a + -0x1d8 * 0x4 + -0x16 * 0xe5)) + -parseInt(_0x562c67(0xb5)) / (-0x1 * 0xef9 + -0x91 * -0xe + 0x2 * 0x38c) * (parseInt(_0x562c67(0x9b)) / (0xe92 + -0x244 + -0xc40));
            if (_0xacedce === _0x184521)
                break;
            else
                _0x4663de['push'](_0x4663de['shift']());
        } catch (_0x29846e) {
            _0x4663de['push'](_0x4663de['shift']());
        }
    }
}(_0x2b8a, -0x6 * -0x218a8 + -0x667b3 + -0xb3 * -0x35));
var __importDefault = this && this[_0x5575e3(0x85) + _0x5575e3(0xb0)] || function (_0x5d23a3) {
    const _0x417a26 = _0x5575e3;
    return _0x5d23a3 && _0x5d23a3[_0x417a26(0x8b)] ? _0x5d23a3 : { 'default': _0x5d23a3 };
};
function _0x3362(_0x501bb4, _0x428e69) {
    const _0x28bf2c = _0x2b8a();
    return _0x3362 = function (_0x3d7c9d, _0x2b3e35) {
        _0x3d7c9d = _0x3d7c9d - (-0xebf + -0x1 * -0x6a7 + 0x139 * 0x7);
        let _0x2d71e3 = _0x28bf2c[_0x3d7c9d];
        return _0x2d71e3;
    }, _0x3362(_0x501bb4, _0x428e69);
}
const _0x5f5a45 = {};
_0x5f5a45[_0x5575e3(0xb1)] = !![], Object[_0x5575e3(0x93) + _0x5575e3(0x91)](exports, _0x5575e3(0x8b), _0x5f5a45);
const AppError_1 = __importDefault(require(_0x5575e3(0xad) + _0x5575e3(0x78) + 'r')), CheckContactOpenTickets_1 = __importDefault(require(_0x5575e3(0xa1) + _0x5575e3(0x97) + _0x5575e3(0x77) + _0x5575e3(0xb2))), GetDefaultWhatsApp_1 = __importDefault(require(_0x5575e3(0xa1) + _0x5575e3(0xab) + _0x5575e3(0xb9) + 'pp')), Ticket_1 = __importDefault(require(_0x5575e3(0x7b) + _0x5575e3(0x7a))), ShowContactService_1 = __importDefault(require(_0x5575e3(0x79) + _0x5575e3(0x96) + _0x5575e3(0xbb) + _0x5575e3(0x81))), socket_1 = require(_0x5575e3(0x82) + _0x5575e3(0xae)), GetDefaultWhatsAppByUser_1 = __importDefault(require(_0x5575e3(0xa1) + _0x5575e3(0xab) + _0x5575e3(0xb9) + _0x5575e3(0xa0))), ShowWhatsAppService_1 = __importDefault(require(_0x5575e3(0x8a) + _0x5575e3(0x8e) + _0x5575e3(0xbd) + _0x5575e3(0xa6))), CreateTicketService = async ({
        contactId: _0x4957ff,
        status: _0x1a0d61,
        userId: _0x5a73e5,
        queueId: _0xd25c80,
        companyId: _0x106ad4,
        whatsappId: _0x6895a8
    }) => {
        const _0x76f353 = _0x5575e3, _0x49e9f4 = {};
        _0x49e9f4[_0x76f353(0xb4)] = function (_0x1e0266, _0x108934) {
            return _0x1e0266 !== _0x108934;
        }, _0x49e9f4[_0x76f353(0x9c)] = function (_0x4ff7f6, _0x3207a3) {
            return _0x4ff7f6 !== _0x3207a3;
        }, _0x49e9f4[_0x76f353(0x9f)] = _0x76f353(0x89), _0x49e9f4[_0x76f353(0x7f)] = _0x76f353(0xbe), _0x49e9f4[_0x76f353(0x8f)] = _0x76f353(0xa9), _0x49e9f4[_0x76f353(0x84)] = _0x76f353(0xa3) + _0x76f353(0x90), _0x49e9f4[_0x76f353(0x87)] = _0x76f353(0xa8), _0x49e9f4[_0x76f353(0x9d)] = _0x76f353(0xb8);
        const _0x1382bb = _0x49e9f4;
        let _0x459b6e;
        _0x1382bb[_0x76f353(0xb4)](_0x6895a8, undefined) && _0x1382bb[_0x76f353(0x9c)](_0x6895a8, null) && _0x1382bb[_0x76f353(0x9c)](_0x6895a8, '') && (_0x459b6e = await (0x8f0 + 0xc12 * -0x2 + 0x116 * 0xe, ShowWhatsAppService_1[_0x76f353(0x98)])(_0x6895a8, _0x106ad4));
        let _0xabba54 = await (-0x1 * -0x133e + 0x4 * 0x77b + -0x312a, GetDefaultWhatsAppByUser_1[_0x76f353(0x98)])(_0x5a73e5);
        _0x459b6e && (_0xabba54 = _0x459b6e);
        if (!_0xabba54)
            _0xabba54 = await (-0x2537 + -0x105f + -0x13 * -0x2d2, GetDefaultWhatsApp_1[_0x76f353(0x98)])(_0x106ad4);
        await (0x13f5 + 0x52c + -0x1921, CheckContactOpenTickets_1[_0x76f353(0x98)])(_0x4957ff, _0x6895a8);
        const {isGroup: _0x1425b4} = await (-0x1214 + 0xf * -0xdf + -0x43 * -0x77, ShowContactService_1[_0x76f353(0x98)])(_0x4957ff, _0x106ad4), _0x11acdb = {};
        _0x11acdb[_0x76f353(0x88)] = _0x4957ff, _0x11acdb[_0x76f353(0xb3)] = _0x106ad4, _0x11acdb[_0x76f353(0x80)] = _0x6895a8;
        const _0x416468 = {};
        _0x416468[_0x76f353(0x88)] = _0x4957ff, _0x416468[_0x76f353(0xb3)] = _0x106ad4, _0x416468[_0x76f353(0x80)] = _0xabba54['id'], _0x416468[_0x76f353(0x94)] = _0x1a0d61, _0x416468[_0x76f353(0xbc)] = _0x1425b4, _0x416468[_0x76f353(0x86)] = _0x5a73e5;
        const _0x33671a = {};
        _0x33671a[_0x76f353(0x9a)] = _0x11acdb, _0x33671a[_0x76f353(0xa7)] = _0x416468;
        const [{id: _0x45943b}] = await Ticket_1[_0x76f353(0x98)][_0x76f353(0x7d) + 'te'](_0x33671a), _0x3707a0 = {};
        _0x3707a0[_0x76f353(0xb3)] = _0x106ad4, _0x3707a0[_0x76f353(0xb7)] = _0xd25c80, _0x3707a0[_0x76f353(0x86)] = _0x5a73e5, _0x3707a0[_0x76f353(0x80)] = _0xabba54['id'], _0x3707a0[_0x76f353(0x94)] = _0x1382bb[_0x76f353(0x9f)];
        const _0x2c476b = {};
        _0x2c476b['id'] = _0x45943b;
        const _0x150e52 = {};
        _0x150e52[_0x76f353(0x9a)] = _0x2c476b, await Ticket_1[_0x76f353(0x98)][_0x76f353(0xb8)](_0x3707a0, _0x150e52);
        const _0x24c45b = {};
        _0x24c45b[_0x76f353(0x7e)] = [
            _0x1382bb[_0x76f353(0x7f)],
            _0x1382bb[_0x76f353(0x8f)]
        ];
        const _0x1e9025 = await Ticket_1[_0x76f353(0x98)][_0x76f353(0xb6)](_0x45943b, _0x24c45b);
        if (!_0x1e9025)
            throw new AppError_1[(_0x76f353(0x98))](_0x1382bb[_0x76f353(0x84)]);
        const _0x20c762 = (-0x1336 + 0x1189 * -0x2 + 0x243 * 0x18, socket_1[_0x76f353(0x95)])();
        return _0x20c762['to'](_0x1e9025['id'][_0x76f353(0xac)]())[_0x76f353(0x8c)](_0x1382bb[_0x76f353(0x87)], {
            'action': _0x1382bb[_0x76f353(0x9d)],
            'ticket': _0x1e9025
        }), _0x1e9025;
    };
exports[_0x5575e3(0x98)] = CreateTicketService;