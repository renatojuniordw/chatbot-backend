'use strict';
const _0x11cd8c = _0x46cd;
function _0x46cd(_0x26cc28, _0x3833ff) {
    const _0x222c66 = _0x4dc4();
    return _0x46cd = function (_0x131b67, _0x2b560d) {
        _0x131b67 = _0x131b67 - (0x2 * -0x12df + 0x101 + -0x8 * -0x4c7);
        let _0x5d0776 = _0x222c66[_0x131b67];
        return _0x5d0776;
    }, _0x46cd(_0x26cc28, _0x3833ff);
}
(function (_0x30cd50, _0x4cbe54) {
    const _0x3abe15 = _0x46cd, _0x243381 = _0x30cd50();
    while (!![]) {
        try {
            const _0xc47650 = -parseInt(_0x3abe15(0x18f)) / (-0x12fd + 0xa1 * -0x1c + 0x249a) * (-parseInt(_0x3abe15(0x188)) / (-0x579 + 0x1ae2 + -0x1567)) + -parseInt(_0x3abe15(0x19c)) / (-0x1adf + 0x233 + 0x18af) * (-parseInt(_0x3abe15(0x1ad)) / (0xb9 * -0x5 + -0x17bd * -0x1 + -0x141c)) + -parseInt(_0x3abe15(0x183)) / (-0x20f8 + -0x23b4 * 0x1 + -0xdbd * -0x5) * (-parseInt(_0x3abe15(0x18b)) / (-0x1e7b + -0x6b6 + 0x2537)) + -parseInt(_0x3abe15(0x19e)) / (-0x13e6 + -0xcd * -0xb + 0xb1e) + -parseInt(_0x3abe15(0x190)) / (-0x11a9 + -0x1 * 0x12c1 + 0x2472) + -parseInt(_0x3abe15(0x182)) / (-0xfd3 + 0x1 * -0x46d + 0x1449) * (parseInt(_0x3abe15(0x186)) / (0x19ff + 0x1b0a * 0x1 + -0x34ff)) + parseInt(_0x3abe15(0x18c)) / (0xfb3 * 0x1 + 0xdab * -0x1 + -0x1fd);
            if (_0xc47650 === _0x4cbe54)
                break;
            else
                _0x243381['push'](_0x243381['shift']());
        } catch (_0x58a619) {
            _0x243381['push'](_0x243381['shift']());
        }
    }
}(_0x4dc4, -0xdc76 + 0x16d6b4 + -0x88c87));
function _0x4dc4() {
    const _0x8f829d = [
        'ervices/Sh',
        'createdAt',
        '89538IpHmvK',
        'rvice',
        '4584412DNmGrD',
        'sequelize',
        'Glagl',
        '__esModule',
        'reverse',
        'defineProp',
        '../../erro',
        'DESC',
        'companyId',
        'smjsl',
        'ls/Message',
        'Tekyx',
        'rs/AppErro',
        'ls/Queue',
        'fault',
        '100ptvWXp',
        'queue',
        'HNRNl',
        'HiSQy',
        'queueId',
        'nqodJ',
        '../TicketS',
        'quotedMsg',
        'value',
        'contact',
        'default',
        '29385ZUxukW',
        '55rAOZvC',
        'xJtyN',
        'erty',
        '3750UuqtAH',
        'TFweM',
        '4OYkMbV',
        'QYYFH',
        'findAndCou',
        '46236tbgoRe',
        '10913529pxsIUH',
        'ntAll',
        'owTicketSe',
        '792811onkPCJ',
        '5194648OGOZMl',
        'KET_FOUND',
        'LbQUW',
        '../../mode',
        'UjOrp',
        '__importDe',
        'where',
        'ERR_NO_TIC',
        'ticketId',
        'length'
    ];
    _0x4dc4 = function () {
        return _0x8f829d;
    };
    return _0x4dc4();
}
var __importDefault = this && this[_0x11cd8c(0x195) + _0x11cd8c(0x1ac)] || function (_0x50bbdc) {
    const _0x1c9566 = _0x11cd8c;
    return _0x50bbdc && _0x50bbdc[_0x1c9566(0x1a1)] ? _0x50bbdc : { 'default': _0x50bbdc };
};
const _0x25f8a1 = {};
_0x25f8a1[_0x11cd8c(0x17f)] = !![], Object[_0x11cd8c(0x1a3) + _0x11cd8c(0x185)](exports, _0x11cd8c(0x1a1), _0x25f8a1);
const sequelize_1 = require(_0x11cd8c(0x19f)), AppError_1 = __importDefault(require(_0x11cd8c(0x1a4) + _0x11cd8c(0x1aa) + 'r')), Message_1 = __importDefault(require(_0x11cd8c(0x193) + _0x11cd8c(0x1a8))), ShowTicketService_1 = __importDefault(require(_0x11cd8c(0x17d) + _0x11cd8c(0x19a) + _0x11cd8c(0x18e) + _0x11cd8c(0x19d))), Queue_1 = __importDefault(require(_0x11cd8c(0x193) + _0x11cd8c(0x1ab))), ListMessagesService = async ({
        pageNumber: pageNumber = '1',
        ticketId: _0x2158f6,
        companyId: _0x34f56d,
        queues: queues = []
    }) => {
        const _0x201d0d = _0x11cd8c, _0x129ca9 = {};
        _0x129ca9[_0x201d0d(0x1af)] = _0x201d0d(0x197) + _0x201d0d(0x191), _0x129ca9[_0x201d0d(0x1a0)] = function (_0x3adcc3, _0x2514cd) {
            return _0x3adcc3 * _0x2514cd;
        }, _0x129ca9[_0x201d0d(0x187)] = function (_0x52c373, _0x5065b5) {
            return _0x52c373 - _0x5065b5;
        }, _0x129ca9[_0x201d0d(0x194)] = function (_0x3c2aac, _0x458902) {
            return _0x3c2aac > _0x458902;
        }, _0x129ca9[_0x201d0d(0x1a9)] = _0x201d0d(0x17b), _0x129ca9[_0x201d0d(0x192)] = _0x201d0d(0x180), _0x129ca9[_0x201d0d(0x189)] = _0x201d0d(0x17e), _0x129ca9[_0x201d0d(0x1a7)] = _0x201d0d(0x1ae), _0x129ca9[_0x201d0d(0x17c)] = _0x201d0d(0x19b), _0x129ca9[_0x201d0d(0x184)] = _0x201d0d(0x1a5), _0x129ca9[_0x201d0d(0x1b0)] = function (_0x1f4657, _0x3c1407) {
            return _0x1f4657 + _0x3c1407;
        };
        const _0x24428c = _0x129ca9, _0x2022c2 = await (-0x226c * -0x1 + -0x55a * 0x1 + -0x1d12, ShowTicketService_1[_0x201d0d(0x181)])(_0x2158f6, _0x34f56d);
        if (!_0x2022c2)
            throw new AppError_1[(_0x201d0d(0x181))](_0x24428c[_0x201d0d(0x1af)], -0x656 + -0x6d2 * 0x1 + -0x3af * -0x4);
        const _0x21d06d = -0x3c * -0x49 + 0x239 * 0x5 + 0x83 * -0x37, _0x372cec = _0x24428c[_0x201d0d(0x1a0)](_0x21d06d, _0x24428c[_0x201d0d(0x187)](+pageNumber, -0x1f2 + -0xb73 * -0x2 + 0xad * -0x1f)), _0x2df01e = {};
        _0x2df01e[_0x201d0d(0x198)] = _0x2158f6, _0x2df01e[_0x201d0d(0x1a6)] = _0x34f56d;
        const _0x5d1332 = {};
        _0x5d1332[_0x201d0d(0x196)] = _0x2df01e;
        const _0x4fd865 = _0x5d1332;
        if (_0x24428c[_0x201d0d(0x194)](queues[_0x201d0d(0x199)], -0x25d3 + 0x193f * 0x1 + -0xa1 * -0x14)) {
            const _0x128b73 = {
                [sequelize_1['Op']['or']]: {
                    [sequelize_1['Op']['in']]: queues,
                    [sequelize_1['Op']['eq']]: null
                }
            };
            _0x4fd865[_0x201d0d(0x196)][_0x24428c[_0x201d0d(0x1a9)]] = _0x128b73;
        }
        const {
                count: _0x530858,
                rows: _0x4ed274
            } = await Message_1[_0x201d0d(0x181)][_0x201d0d(0x18a) + _0x201d0d(0x18d)]({
                ..._0x4fd865,
                'limit': _0x21d06d,
                'include': [
                    _0x24428c[_0x201d0d(0x192)],
                    {
                        'model': Message_1[_0x201d0d(0x181)],
                        'as': _0x24428c[_0x201d0d(0x189)],
                        'include': [_0x24428c[_0x201d0d(0x192)]]
                    },
                    {
                        'model': Queue_1[_0x201d0d(0x181)],
                        'as': _0x24428c[_0x201d0d(0x1a7)]
                    }
                ],
                'offset': _0x372cec,
                'order': [[
                        _0x24428c[_0x201d0d(0x17c)],
                        _0x24428c[_0x201d0d(0x184)]
                    ]]
            }), _0x4d460d = _0x24428c[_0x201d0d(0x194)](_0x530858, _0x24428c[_0x201d0d(0x1b0)](_0x372cec, _0x4ed274[_0x201d0d(0x199)]));
        return {
            'messages': _0x4ed274[_0x201d0d(0x1a2)](),
            'ticket': _0x2022c2,
            'count': _0x530858,
            'hasMore': _0x4d460d
        };
    };
exports[_0x11cd8c(0x181)] = ListMessagesService;