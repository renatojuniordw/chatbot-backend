'use strict';
const _0x531591 = _0x51f2;
(function (_0x292be0, _0x1a1349) {
    const _0x31b718 = _0x51f2, _0x3f8f65 = _0x292be0();
    while (!![]) {
        try {
            const _0x244289 = parseInt(_0x31b718(0x1be)) / (0x3c1 * 0x3 + -0x592 + -0x5b0) + -parseInt(_0x31b718(0x151)) / (0x1daa + 0x2 * 0x29 + -0x1dfa) * (parseInt(_0x31b718(0x178)) / (0x1c3c + 0xc9c + -0x28d5)) + -parseInt(_0x31b718(0x188)) / (0x1c6 + 0x1e37 + -0x1ff9) * (-parseInt(_0x31b718(0x1ae)) / (-0x101a + -0x1d4f + 0xa * 0x48b)) + parseInt(_0x31b718(0x14a)) / (-0x1 * 0x1ef9 + 0x1e0c + -0x1 * -0xf3) * (parseInt(_0x31b718(0x158)) / (-0x1 * 0x9c1 + -0x668 * 0x5 + -0x6f8 * -0x6)) + -parseInt(_0x31b718(0x16b)) / (0x266c + -0x2 * -0x6e3 + -0x342a) * (parseInt(_0x31b718(0x18d)) / (-0x19dd + -0x218b + 0x3b71 * 0x1)) + -parseInt(_0x31b718(0x14e)) / (0xe4 * 0x15 + -0x1d37 + 0xa8d) * (-parseInt(_0x31b718(0x192)) / (0xc4c + -0x445 * -0x5 + 0x1fa * -0x11)) + parseInt(_0x31b718(0x17f)) / (0x44b + -0x5db * -0x1 + 0x50d * -0x2);
            if (_0x244289 === _0x1a1349)
                break;
            else
                _0x3f8f65['push'](_0x3f8f65['shift']());
        } catch (_0x298069) {
            _0x3f8f65['push'](_0x3f8f65['shift']());
        }
    }
}(_0x12b4, -0x1 * -0x175ab9 + 0x752 * 0x120 + -0x3277 * 0x5f));
var __createBinding = this && this[_0x531591(0x1b4) + _0x531591(0x1bf)] || (Object[_0x531591(0x159)] ? function (_0x29ed74, _0x9c3abb, _0x281ca9, _0x17d14f) {
        const _0x227ef9 = _0x531591, _0x577f1c = {};
        _0x577f1c[_0x227ef9(0x154)] = function (_0x224da6, _0x166b75) {
            return _0x224da6 === _0x166b75;
        }, _0x577f1c[_0x227ef9(0x176)] = function (_0x5eebdb, _0x258fa7) {
            return _0x5eebdb in _0x258fa7;
        }, _0x577f1c[_0x227ef9(0x155)] = _0x227ef9(0x18c);
        const _0x1490cd = _0x577f1c;
        if (_0x1490cd[_0x227ef9(0x154)](_0x17d14f, undefined))
            _0x17d14f = _0x281ca9;
        var _0xbe763e = Object[_0x227ef9(0x173) + _0x227ef9(0x15d) + _0x227ef9(0x18a)](_0x9c3abb, _0x281ca9);
        if (!_0xbe763e || (_0x1490cd[_0x227ef9(0x176)](_0x1490cd[_0x227ef9(0x155)], _0xbe763e) ? !_0x9c3abb[_0x227ef9(0x150)] : _0xbe763e[_0x227ef9(0x14c)] || _0xbe763e[_0x227ef9(0x189) + 'le'])) {
            const _0x205960 = {};
            _0x205960[_0x227ef9(0x1a9)] = !![], _0x205960[_0x227ef9(0x18c)] = function () {
                return _0x9c3abb[_0x281ca9];
            }, _0xbe763e = _0x205960;
        }
        Object[_0x227ef9(0x14b) + _0x227ef9(0x163)](_0x29ed74, _0x17d14f, _0xbe763e);
    } : function (_0x3fe512, _0x130b1a, _0x4c4487, _0x58f74c) {
        const _0x4806b4 = _0x531591, _0x41d8ff = {};
        _0x41d8ff[_0x4806b4(0x199)] = function (_0x4bca3d, _0x3cbe61) {
            return _0x4bca3d === _0x3cbe61;
        };
        const _0x22ca2c = _0x41d8ff;
        if (_0x22ca2c[_0x4806b4(0x199)](_0x58f74c, undefined))
            _0x58f74c = _0x4c4487;
        _0x3fe512[_0x58f74c] = _0x130b1a[_0x4c4487];
    }), __setModuleDefault = this && this[_0x531591(0x1ba) + _0x531591(0x1d4)] || (Object[_0x531591(0x159)] ? function (_0x449a3b, _0x4435d5) {
        const _0x5371c4 = _0x531591, _0x1e1a41 = {};
        _0x1e1a41[_0x5371c4(0x15c)] = _0x5371c4(0x1c6);
        const _0x1fba84 = _0x1e1a41, _0xd11f12 = {};
        _0xd11f12[_0x5371c4(0x1a9)] = !![], _0xd11f12[_0x5371c4(0x15e)] = _0x4435d5, Object[_0x5371c4(0x14b) + _0x5371c4(0x163)](_0x449a3b, _0x1fba84[_0x5371c4(0x15c)], _0xd11f12);
    } : function (_0x4cb2a4, _0x1452c1) {
        const _0x1fb7c9 = _0x531591, _0x2de1f3 = {};
        _0x2de1f3[_0x1fb7c9(0x18e)] = _0x1fb7c9(0x1c6);
        const _0x388fc1 = _0x2de1f3;
        _0x4cb2a4[_0x388fc1[_0x1fb7c9(0x18e)]] = _0x1452c1;
    }), __importStar = this && this[_0x531591(0x152) + 'ar'] || function (_0x39b069) {
        const _0xb034a6 = _0x531591, _0x235fc6 = {
                'KjBja': _0xb034a6(0x1b1),
                'rqyUS': function (_0x3b9c05, _0x3f03b1) {
                    return _0x3b9c05 != _0x3f03b1;
                },
                'WQHgu': function (_0x3fa373, _0x405766) {
                    return _0x3fa373 !== _0x405766;
                },
                'mFBTX': _0xb034a6(0x1c6),
                'qAqxJ': function (_0x4df924, _0x3e3867, _0x5ab5f0, _0x659b95) {
                    return _0x4df924(_0x3e3867, _0x5ab5f0, _0x659b95);
                },
                'tuelZ': function (_0x5735b1, _0x2d5942, _0x1cf325) {
                    return _0x5735b1(_0x2d5942, _0x1cf325);
                }
            }, _0x5a0fe4 = _0x235fc6[_0xb034a6(0x194)][_0xb034a6(0x1ac)]('|');
        let _0x1dc265 = -0x1a91 + -0x2638 + 0x1f * 0x217;
        while (!![]) {
            switch (_0x5a0fe4[_0x1dc265++]) {
            case '0':
                if (_0x235fc6[_0xb034a6(0x1c8)](_0x39b069, null)) {
                    for (var _0xa2fc40 in _0x39b069)
                        if (_0x235fc6[_0xb034a6(0x1a7)](_0xa2fc40, _0x235fc6[_0xb034a6(0x19c)]) && Object[_0xb034a6(0x1bc)][_0xb034a6(0x1ce) + _0xb034a6(0x163)][_0xb034a6(0x185)](_0x39b069, _0xa2fc40))
                            _0x235fc6[_0xb034a6(0x17e)](__createBinding, _0x33075b, _0x39b069, _0xa2fc40);
                }
                continue;
            case '1':
                return _0x33075b;
            case '2':
                if (_0x39b069 && _0x39b069[_0xb034a6(0x150)])
                    return _0x39b069;
                continue;
            case '3':
                var _0x33075b = {};
                continue;
            case '4':
                _0x235fc6[_0xb034a6(0x1b9)](__setModuleDefault, _0x33075b, _0x39b069);
                continue;
            }
            break;
        }
    }, __importDefault = this && this[_0x531591(0x186) + _0x531591(0x1c0)] || function (_0x2fcc4d) {
        const _0x17d193 = _0x531591;
        return _0x2fcc4d && _0x2fcc4d[_0x17d193(0x150)] ? _0x2fcc4d : { 'default': _0x2fcc4d };
    };
const _0x2155bf = {};
_0x2155bf[_0x531591(0x15e)] = !![], Object[_0x531591(0x14b) + _0x531591(0x163)](exports, _0x531591(0x150), _0x2155bf), exports[_0x531591(0x16e)] = exports[_0x531591(0x19a) + _0x531591(0x1c1)] = exports[_0x531591(0x17b) + _0x531591(0x182)] = exports[_0x531591(0x183)] = void (-0xa7 + -0xf0 * -0xe + 0x67 * -0x1f);
const express_1 = __importDefault(require(_0x531591(0x18b))), Yup = __importStar(require(_0x531591(0x170))), gn_api_sdk_typescript_1 = __importDefault(require(_0x531591(0x1a4) + _0x531591(0x1d0) + 't')), AppError_1 = __importDefault(require(_0x531591(0x1cc) + _0x531591(0x1b5))), Gn_1 = __importDefault(require(_0x531591(0x1d1) + 'Gn')), Company_1 = __importDefault(require(_0x531591(0x161) + _0x531591(0x19b))), Invoices_1 = __importDefault(require(_0x531591(0x161) + _0x531591(0x18f))), socket_1 = require(_0x531591(0x16a) + _0x531591(0x1ad)), app = (-0x23ae + 0x1a6 * 0x6 + -0x1 * -0x19ca, express_1[_0x531591(0x1c6)])(), index = async (_0x196669, _0x53e084) => {
        const _0x55a878 = _0x531591, _0xceeee6 = (-0x2dd * -0x3 + 0x1962 + -0x21f9, gn_api_sdk_typescript_1[_0x55a878(0x1c6)])(Gn_1[_0x55a878(0x1c6)]);
        return _0x53e084[_0x55a878(0x190)](_0xceeee6[_0x55a878(0x1b7) + _0x55a878(0x16f)]());
    };
exports[_0x531591(0x183)] = index;
const createSubscription = async (_0x267cf4, _0x548200) => {
    const _0x2af558 = _0x531591, _0x421f86 = {};
    _0x421f86[_0x2af558(0x1ab)] = _0x2af558(0x153) + _0x2af558(0x1c2), _0x421f86[_0x2af558(0x195)] = _0x2af558(0x168), _0x421f86[_0x2af558(0x184)] = _0x2af558(0x1bd) + _0x2af558(0x164);
    const _0x1fa523 = _0x421f86, _0x2f0b3f = (0x1944 + 0x4ae + -0x1df2 * 0x1, gn_api_sdk_typescript_1[_0x2af558(0x1c6)])(Gn_1[_0x2af558(0x1c6)]), {companyId: _0x375137} = _0x267cf4[_0x2af558(0x174)], _0x23a14b = Yup[_0x2af558(0x1c9)]()[_0x2af558(0x165)]({
            'price': Yup[_0x2af558(0x187)]()[_0x2af558(0x1b3)](),
            'users': Yup[_0x2af558(0x187)]()[_0x2af558(0x1b3)](),
            'connections': Yup[_0x2af558(0x187)]()[_0x2af558(0x1b3)]()
        });
    if (!await _0x23a14b[_0x2af558(0x1c5)](_0x267cf4[_0x2af558(0x1b8)]))
        throw new AppError_1[(_0x2af558(0x1c6))](_0x1fa523[_0x2af558(0x1ab)], -0x1 * -0xae9 + -0x1795 + 0x2 * 0x71e);
    const {
            firstName: _0x352c99,
            price: _0x287847,
            users: _0x31fbe7,
            connections: _0x56e682,
            address2: _0x8c89ce,
            city: _0x4faaa3,
            state: _0x497f4f,
            zipcode: _0x354178,
            country: _0x52734e,
            plan: _0xad69ce,
            invoiceId: _0x244f94
        } = _0x267cf4[_0x2af558(0x1b8)], _0x3dfbe6 = {};
    _0x3dfbe6[_0x2af558(0x14f)] = 0xe10;
    const _0x35e455 = {};
    _0x35e455[_0x2af558(0x15f) + _0x2af558(0x16d) + 's'] = 0x2;
    const _0x575ffb = {
        'calendario': _0x3dfbe6,
        'valor': { 'original': _0x287847[_0x2af558(0x1a5) + _0x2af558(0x15a)](_0x1fa523[_0x2af558(0x195)], _0x35e455)[_0x2af558(0x156)](',', '.') },
        'chave': process[_0x2af558(0x167)][_0x2af558(0x1a3) + _0x2af558(0x1a2)],
        'solicitacaoPagador': _0x2af558(0x166) + _0x244f94
    };
    try {
        const _0x155a90 = await _0x2f0b3f[_0x2af558(0x1cd) + _0x2af558(0x196) + _0x2af558(0x1cf)](null, _0x575ffb), _0x15111c = {};
        _0x15111c['id'] = _0x155a90[_0x2af558(0x181)]['id'];
        const _0x11c396 = await _0x2f0b3f[_0x2af558(0x1ca) + _0x2af558(0x19e)](_0x15111c), _0x2fb366 = await Company_1[_0x2af558(0x1c6)][_0x2af558(0x19d)]();
        if (!_0x2fb366)
            throw new AppError_1[(_0x2af558(0x1c6))](_0x1fa523[_0x2af558(0x184)], -0x2 * -0x205 + -0xc1a + -0x4d2 * -0x2);
        const _0x488822 = { ..._0x155a90 };
        return _0x488822[_0x2af558(0x197)] = _0x11c396, _0x548200[_0x2af558(0x190)](_0x488822);
    } catch (_0x3f10fd) {
        throw new AppError_1[(_0x2af558(0x1c6))](_0x1fa523[_0x2af558(0x1ab)], -0x241 * 0x5 + 0x3e * -0x33 + 0x192f);
    }
};
exports[_0x531591(0x17b) + _0x531591(0x182)] = createSubscription;
const createWebhook = async (_0x130e2e, _0x4e0af8) => {
    const _0x1ddb99 = _0x531591, _0x180b7b = {};
    _0x180b7b[_0x1ddb99(0x1a6)] = _0x1ddb99(0x153) + _0x1ddb99(0x1c2);
    const _0x1e2495 = _0x180b7b, _0x3322d2 = Yup[_0x1ddb99(0x1c9)]()[_0x1ddb99(0x165)]({
            'chave': Yup[_0x1ddb99(0x187)]()[_0x1ddb99(0x1b3)](),
            'url': Yup[_0x1ddb99(0x187)]()[_0x1ddb99(0x1b3)]()
        });
    if (!await _0x3322d2[_0x1ddb99(0x1c5)](_0x130e2e[_0x1ddb99(0x1b8)]))
        throw new AppError_1[(_0x1ddb99(0x1c6))](_0x1e2495[_0x1ddb99(0x1a6)], 0x1097 + -0x1 * -0x1691 + -0x18 * 0x191);
    const {
            chave: _0x574134,
            url: _0x5f3ce3
        } = _0x130e2e[_0x1ddb99(0x1b8)], _0x34d3c8 = {};
    _0x34d3c8[_0x1ddb99(0x1b6)] = _0x5f3ce3;
    const _0x2acf8f = _0x34d3c8, _0x3a9122 = {};
    _0x3a9122[_0x1ddb99(0x1a8)] = _0x574134;
    const _0x2ecc2f = _0x3a9122;
    try {
        const _0x33adfd = (-0x150a + 0x3 * -0x435 + -0x21a9 * -0x1, gn_api_sdk_typescript_1[_0x1ddb99(0x1c6)])(Gn_1[_0x1ddb99(0x1c6)]), _0x4b1307 = await _0x33adfd[_0x1ddb99(0x179) + _0x1ddb99(0x1af)](_0x2ecc2f, _0x2acf8f);
        return _0x4e0af8[_0x1ddb99(0x190)](_0x4b1307);
    } catch (_0x49470b) {
        console[_0x1ddb99(0x17d)](_0x49470b);
    }
};
function _0x51f2(_0x395baf, _0x33e1b5) {
    const _0x115911 = _0x12b4();
    return _0x51f2 = function (_0x2e884a, _0xd89476) {
        _0x2e884a = _0x2e884a - (-0x759 + 0x1b * 0x12d + -0x171c);
        let _0x3998aa = _0x115911[_0x2e884a];
        return _0x3998aa;
    }, _0x51f2(_0x395baf, _0x33e1b5);
}
exports[_0x531591(0x19a) + _0x531591(0x1c1)] = createWebhook;
const webhook = async (_0xf7a294, _0x1e371f) => {
    const _0x307ef8 = _0x531591, _0x5d4c18 = {};
    _0x5d4c18[_0x307ef8(0x1c3)] = function (_0x188d92, _0x32be30) {
        return _0x188d92 === _0x32be30;
    }, _0x5d4c18[_0x307ef8(0x1bb)] = _0x307ef8(0x1a1), _0x5d4c18[_0x307ef8(0x1a0)] = _0x307ef8(0x166), _0x5d4c18[_0x307ef8(0x193)] = function (_0x51c135, _0x588959) {
        return _0x51c135 + _0x588959;
    }, _0x5d4c18[_0x307ef8(0x162)] = _0x307ef8(0x14d), _0x5d4c18[_0x307ef8(0x169)] = _0x307ef8(0x1d2) + _0x307ef8(0x1c1);
    const _0x50216d = _0x5d4c18, {type: _0x552bf1} = _0xf7a294[_0x307ef8(0x160)], {evento: _0x307975} = _0xf7a294[_0x307ef8(0x1b8)];
    if (_0x50216d[_0x307ef8(0x1c3)](_0x307975, _0x50216d[_0x307ef8(0x169)])) {
        const _0x27cde0 = {};
        return _0x27cde0['ok'] = !![], _0x1e371f[_0x307ef8(0x190)](_0x27cde0);
    }
    if (_0xf7a294[_0x307ef8(0x1b8)][_0x307ef8(0x1d3)]) {
        const _0x14eacb = (0xb * 0x24d + 0xa7d + 0x8f3 * -0x4, gn_api_sdk_typescript_1[_0x307ef8(0x1c6)])(Gn_1[_0x307ef8(0x1c6)]);
        _0xf7a294[_0x307ef8(0x1b8)][_0x307ef8(0x1d3)][_0x307ef8(0x1b0)](async _0x32ccf4 => {
            const _0x461b18 = _0x307ef8, _0x1abad7 = {};
            _0x1abad7[_0x461b18(0x17a)] = _0x32ccf4[_0x461b18(0x17a)];
            const _0x303718 = await _0x14eacb[_0x461b18(0x171) + _0x461b18(0x1c4)](_0x1abad7);
            if (_0x50216d[_0x461b18(0x1c3)](_0x303718[_0x461b18(0x1c7)], _0x50216d[_0x461b18(0x1bb)])) {
                const {solicitacaoPagador: _0x9d7024} = _0x303718, _0x2fe340 = _0x9d7024[_0x461b18(0x156)](_0x50216d[_0x461b18(0x1a0)], ''), _0x974b7d = await Invoices_1[_0x461b18(0x1c6)][_0x461b18(0x1d5)](_0x2fe340), _0x52400e = _0x974b7d[_0x461b18(0x191)], _0x4ae705 = await Company_1[_0x461b18(0x1c6)][_0x461b18(0x1d5)](_0x52400e), _0xea2af9 = new Date(_0x4ae705[_0x461b18(0x1aa)]);
                _0xea2af9[_0x461b18(0x1cb)](_0x50216d[_0x461b18(0x193)](_0xea2af9[_0x461b18(0x17c)](), 0xd4f * 0x1 + 0x1e2b + -0x2b5c));
                const _0x1e5a55 = _0xea2af9[_0x461b18(0x15b) + 'g']()[_0x461b18(0x1ac)]('T')[0x1976 + -0xf7 * -0x1d + -0x3571 * 0x1];
                if (_0x4ae705) {
                    const _0x39a31c = {};
                    _0x39a31c[_0x461b18(0x1aa)] = _0x1e5a55, await _0x4ae705[_0x461b18(0x172)](_0x39a31c);
                    const _0x3be842 = {};
                    _0x3be842['id'] = _0x2fe340, _0x3be842[_0x461b18(0x1c7)] = _0x50216d[_0x461b18(0x162)];
                    const _0x1b8874 = await _0x974b7d[_0x461b18(0x172)](_0x3be842);
                    await _0x4ae705[_0x461b18(0x19f)]();
                    const _0x393429 = (0x1052 + -0x233 + 0xe1f * -0x1, socket_1[_0x461b18(0x180)])(), _0x321fcc = {};
                    _0x321fcc['id'] = _0x52400e;
                    const _0x576b13 = {};
                    _0x576b13[_0x461b18(0x157)] = _0x321fcc;
                    const _0x3174cb = await Company_1[_0x461b18(0x1c6)][_0x461b18(0x19d)](_0x576b13), _0x229be6 = {};
                    _0x229be6[_0x461b18(0x175)] = _0x303718[_0x461b18(0x1c7)], _0x229be6[_0x461b18(0x16c)] = _0x3174cb, _0x393429[_0x461b18(0x1b2)](_0x461b18(0x198) + _0x52400e + _0x461b18(0x177), _0x229be6);
                }
            }
        });
    }
    const _0x3053bf = {};
    return _0x3053bf['ok'] = !![], _0x1e371f[_0x307ef8(0x190)](_0x3053bf);
};
function _0x12b4() {
    const _0x1fb014 = [
        'Company',
        'mFBTX',
        'findOne',
        'eQRCode',
        'reload',
        'FrfGM',
        'CONCLUIDA',
        'T_PIX_KEY',
        'GERENCIANE',
        'gn-api-sdk',
        'toLocaleSt',
        'twiPh',
        'WQHgu',
        'chave',
        'enumerable',
        'dueDate',
        'raxAL',
        'split',
        'cket',
        '115nlcotP',
        'ebhook',
        'forEach',
        '2|3|0|4|1',
        'emit',
        'required',
        '__createBi',
        'AppError',
        'webhookUrl',
        'getSubscri',
        'body',
        'tuelZ',
        '__setModul',
        'EXgrC',
        'prototype',
        'Company\x20no',
        '1034998lQofoK',
        'nding',
        'fault',
        'ook',
        '\x20fails',
        'oaiqZ',
        'harge',
        'isValid',
        'default',
        'status',
        'rqyUS',
        'object',
        'pixGenerat',
        'setDate',
        '../errors/',
        'pixCreateI',
        'hasOwnProp',
        'arge',
        '-typescrip',
        '../config/',
        'teste_webh',
        'pix',
        'eDefault',
        'findByPk',
        '36PPQZau',
        'defineProp',
        'writable',
        'paid',
        '2025850cwOpxP',
        'expiracao',
        '__esModule',
        '14ViaRzI',
        '__importSt',
        'Validation',
        'zRToc',
        'pNcWR',
        'replace',
        'where',
        '453579EqbCEy',
        'create',
        'ring',
        'toISOStrin',
        'cCBPE',
        'ertyDescri',
        'value',
        'minimumFra',
        'params',
        '../models/',
        'ojvTL',
        'erty',
        't\x20found',
        'shape',
        '#Fatura:',
        'env',
        'pt-br',
        'hiPGU',
        '../libs/so',
        '5597408WHpIIf',
        'company',
        'ctionDigit',
        'webhook',
        'ptions',
        'yup',
        'pixDetailC',
        'update',
        'getOwnProp',
        'user',
        'action',
        'evJND',
        '-payment',
        '359913naaYTk',
        'pixConfigW',
        'txid',
        'createSubs',
        'getDate',
        'log',
        'qAqxJ',
        '16842684jdnLvd',
        'getIO',
        'loc',
        'cription',
        'index',
        'shEwH',
        'call',
        '__importDe',
        'string',
        '9076vwTciD',
        'configurab',
        'ptor',
        'express',
        'get',
        '18ivveuh',
        'aScYq',
        'Invoices',
        'json',
        'companyId',
        '11XarTFV',
        'EeUxp',
        'KjBja',
        'pjnBB',
        'mmediateCh',
        'qrcode',
        'company-',
        'pRLsd',
        'createWebh'
    ];
    _0x12b4 = function () {
        return _0x1fb014;
    };
    return _0x12b4();
}
exports[_0x531591(0x16e)] = webhook;