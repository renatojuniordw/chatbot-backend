'use strict';
const _0x417932 = _0x58a9;
(function (_0x1d8b38, _0x5b48aa) {
    const _0x320b4c = _0x58a9, _0x13ed6c = _0x1d8b38();
    while (!![]) {
        try {
            const _0x45c1ba = -parseInt(_0x320b4c(0x21b)) / (-0x1607 + -0x36 * -0x2b + 0xcf6) + -parseInt(_0x320b4c(0x200)) / (-0x7eb + 0x13d8 + -0xbeb) + -parseInt(_0x320b4c(0x1f1)) / (0xb03 * -0x2 + -0xe31 * 0x1 + 0x243a) + parseInt(_0x320b4c(0x233)) / (-0x139 * -0x1f + 0x3e * 0x57 + 0x9 * -0x68d) + -parseInt(_0x320b4c(0x23e)) / (-0x1 * 0x19a4 + 0x2a * -0x63 + 0x11 * 0x277) + parseInt(_0x320b4c(0x1e8)) / (0x2287 * -0x1 + 0x213b + 0x152) + parseInt(_0x320b4c(0x1ec)) / (0x22b4 + -0x19e + -0x1f * 0x111) * (parseInt(_0x320b4c(0x220)) / (0x70a + 0x1 * 0xd2b + -0x142d * 0x1));
            if (_0x45c1ba === _0x5b48aa)
                break;
            else
                _0x13ed6c['push'](_0x13ed6c['shift']());
        } catch (_0x6e838) {
            _0x13ed6c['push'](_0x13ed6c['shift']());
        }
    }
}(_0x23da, 0xd7eeb + -0x1062c9 + -0x42b * -0x2ad));
var __importDefault = this && this[_0x417932(0x1f0) + _0x417932(0x1f6)] || function (_0x447e1b) {
    const _0x501c7f = _0x417932;
    return _0x447e1b && _0x447e1b[_0x501c7f(0x1e9)] ? _0x447e1b : { 'default': _0x447e1b };
};
const _0xe61c67 = {};
_0xe61c67[_0x417932(0x22f)] = !![], Object[_0x417932(0x1eb) + _0x417932(0x1e6)](exports, _0x417932(0x1e9), _0xe61c67), exports[_0x417932(0x213)] = exports[_0x417932(0x23c) + 'd'] = exports[_0x417932(0x228) + 'e'] = exports[_0x417932(0x23f)] = exports[_0x417932(0x206)] = exports[_0x417932(0x237)] = exports[_0x417932(0x222)] = exports[_0x417932(0x207)] = void (0x16c8 + -0x12 * 0x227 + -0x1 * -0xff6);
const socket_1 = require(_0x417932(0x201) + _0x417932(0x1fd)), CreateService_1 = __importDefault(require(_0x417932(0x20e) + _0x417932(0x23b) + _0x417932(0x230) + _0x417932(0x224))), ListService_1 = __importDefault(require(_0x417932(0x20e) + _0x417932(0x23b) + _0x417932(0x22e) + _0x417932(0x209))), ShowFromUuidService_1 = __importDefault(require(_0x417932(0x20e) + _0x417932(0x23b) + _0x417932(0x1f2) + _0x417932(0x216) + _0x417932(0x20d))), DeleteService_1 = __importDefault(require(_0x417932(0x20e) + _0x417932(0x23b) + _0x417932(0x234) + _0x417932(0x224))), FindMessages_1 = __importDefault(require(_0x417932(0x20e) + _0x417932(0x23b) + _0x417932(0x208) + _0x417932(0x22b))), UpdateService_1 = __importDefault(require(_0x417932(0x20e) + _0x417932(0x23b) + _0x417932(0x238) + _0x417932(0x224))), Chat_1 = __importDefault(require(_0x417932(0x1ef) + _0x417932(0x1ed))), CreateMessageService_1 = __importDefault(require(_0x417932(0x20e) + _0x417932(0x23b) + _0x417932(0x230) + _0x417932(0x215) + _0x417932(0x21f))), User_1 = __importDefault(require(_0x417932(0x1ef) + _0x417932(0x229))), ChatUser_1 = __importDefault(require(_0x417932(0x1ef) + _0x417932(0x1ee))), index = async (_0x33ab31, _0x4818a0) => {
        const _0x44927e = _0x417932, {pageNumber: _0x4cdd55} = _0x33ab31[_0x44927e(0x202)], _0x424e94 = +_0x33ab31[_0x44927e(0x1ff)]['id'], _0x53f157 = {};
        _0x53f157[_0x44927e(0x232)] = _0x424e94, _0x53f157[_0x44927e(0x1fb)] = _0x4cdd55;
        const {
                records: _0x6c41b7,
                count: _0x203060,
                hasMore: _0x153cd5
            } = await (-0x1559 + 0x24fb + -0x7d1 * 0x2, ListService_1[_0x44927e(0x227)])(_0x53f157), _0x1535bb = {};
        return _0x1535bb[_0x44927e(0x241)] = _0x6c41b7, _0x1535bb[_0x44927e(0x1fa)] = _0x203060, _0x1535bb[_0x44927e(0x21a)] = _0x153cd5, _0x4818a0[_0x44927e(0x219)](_0x1535bb);
    };
function _0x23da() {
    const _0xeb05bc = [
        'remove',
        'cghGK',
        'records',
        'unreads',
        'erty',
        'status',
        '2849850FroZyl',
        '__esModule',
        '-chat-',
        'defineProp',
        '23282ORoeix',
        'Chat',
        'ChatUser',
        '../models/',
        '__importDe',
        '614871IomKxs',
        'ice/ShowFr',
        'company-',
        'users',
        'vWVtw',
        'fault',
        'teeoc',
        'create',
        'emit',
        'count',
        'pageNumber',
        'chatId',
        'cket',
        'senderId',
        'user',
        '769884JGpGfk',
        '../libs/so',
        'query',
        'yGpfV',
        'record',
        'model',
        'show',
        'index',
        'ice/FindMe',
        'rvice',
        'findOne',
        'chat',
        'MGNWb',
        'ice',
        '../service',
        'message',
        'owner',
        'new-messag',
        'nwQyc',
        'messages',
        '-chat',
        'MessageSer',
        'omUuidServ',
        'delete',
        'SdTzH',
        'json',
        'hasMore',
        '845774YeXbgc',
        'BNTft',
        'CitXI',
        'forEach',
        'vice',
        '3448GhxkHh',
        'companyId',
        'store',
        'include',
        'Service',
        '-chat-user',
        'findByPk',
        'default',
        'saveMessag',
        'User',
        'action',
        'ssages',
        'getIO',
        'where',
        'ice/ListSe',
        'value',
        'ice/Create',
        'userId',
        'ownerId',
        '923620aNYZrH',
        'ice/Delete',
        'newMessage',
        'params',
        'update',
        'ice/Update',
        'jwcAc',
        'body',
        's/ChatServ',
        'checkAsRea',
        'Chat\x20delet',
        '811120LysKwA'
    ];
    _0x23da = function () {
        return _0xeb05bc;
    };
    return _0x23da();
}
exports[_0x417932(0x207)] = index;
function _0x58a9(_0x18655e, _0x11e40a) {
    const _0x4bba4f = _0x23da();
    return _0x58a9 = function (_0x3b2bcb, _0x4f8653) {
        _0x3b2bcb = _0x3b2bcb - (-0x1832 + -0x72b * 0x3 + -0x8 * -0x5f3);
        let _0x14daf8 = _0x4bba4f[_0x3b2bcb];
        return _0x14daf8;
    }, _0x58a9(_0x18655e, _0x11e40a);
}
const store = async (_0x1f222e, _0x55ca19) => {
    const _0x347ea4 = _0x417932, _0x14845d = {};
    _0x14845d[_0x347ea4(0x21c)] = _0x347ea4(0x1f8);
    const _0x1a81e1 = _0x14845d, {companyId: _0x4d3ca3} = _0x1f222e[_0x347ea4(0x1ff)], _0x201ce0 = +_0x1f222e[_0x347ea4(0x1ff)]['id'], _0x42268d = _0x1f222e[_0x347ea4(0x23a)], _0x39be2e = { ..._0x42268d };
    _0x39be2e[_0x347ea4(0x232)] = _0x201ce0, _0x39be2e[_0x347ea4(0x221)] = _0x4d3ca3;
    const _0x29119b = await (-0x2289 * -0x1 + 0x2519 + -0x47a2, CreateService_1[_0x347ea4(0x227)])(_0x39be2e), _0x87572e = (0x28c * -0x4 + -0xb94 + 0x15c4, socket_1[_0x347ea4(0x22c)])();
    return _0x29119b[_0x347ea4(0x1f4)][_0x347ea4(0x21e)](_0x4ae57e => {
        const _0x154af2 = _0x347ea4, _0x22ec42 = {};
        _0x22ec42[_0x154af2(0x22a)] = _0x1a81e1[_0x154af2(0x21c)], _0x22ec42[_0x154af2(0x204)] = _0x29119b, _0x87572e[_0x154af2(0x1f9)](_0x154af2(0x1f3) + _0x4d3ca3 + (_0x154af2(0x225) + '-') + _0x4ae57e[_0x154af2(0x231)], _0x22ec42);
    }), _0x55ca19[_0x347ea4(0x1e7)](0x29 * -0x61 + 0xb4f + 0x502)[_0x347ea4(0x219)](_0x29119b);
};
exports[_0x417932(0x222)] = store;
const update = async (_0x29f2e1, _0x46150a) => {
    const _0x1a0806 = _0x417932, _0x355bd1 = {};
    _0x355bd1[_0x1a0806(0x1f5)] = _0x1a0806(0x237);
    const _0x24045f = _0x355bd1, {companyId: _0x2d9d63} = _0x29f2e1[_0x1a0806(0x1ff)], _0x5e4320 = _0x29f2e1[_0x1a0806(0x23a)], {id: _0x514c5c} = _0x29f2e1[_0x1a0806(0x236)], _0x5ebf61 = { ..._0x5e4320 };
    _0x5ebf61['id'] = +_0x514c5c;
    const _0x19b10c = await (0x1f * -0x8f + 0x1a12 + 0x53 * -0x1b, UpdateService_1[_0x1a0806(0x227)])(_0x5ebf61), _0x1935a0 = (-0x6 * -0x15 + 0x258f * -0x1 + 0x2511, socket_1[_0x1a0806(0x22c)])();
    return _0x19b10c[_0x1a0806(0x1f4)][_0x1a0806(0x21e)](_0xbe92f1 => {
        const _0x3787f8 = _0x1a0806, _0x5e76ad = {};
        _0x5e76ad[_0x3787f8(0x22a)] = _0x24045f[_0x3787f8(0x1f5)], _0x5e76ad[_0x3787f8(0x204)] = _0x19b10c, _0x1935a0[_0x3787f8(0x1f9)](_0x3787f8(0x1f3) + _0x2d9d63 + (_0x3787f8(0x225) + '-') + _0xbe92f1[_0x3787f8(0x231)], _0x5e76ad);
    }), _0x46150a[_0x1a0806(0x1e7)](0x21e7 + 0x2413 + -0x4532)[_0x1a0806(0x219)](_0x19b10c);
};
exports[_0x417932(0x237)] = update;
const show = async (_0xd4e140, _0x5016c6) => {
    const _0x3ec2ac = _0x417932, {id: _0x84aa90} = _0xd4e140[_0x3ec2ac(0x236)], _0x2bf16d = await (0x4f * -0x30 + 0x51 * 0x13 + 0x8cd, ShowFromUuidService_1[_0x3ec2ac(0x227)])(_0x84aa90);
    return _0x5016c6[_0x3ec2ac(0x1e7)](0xbbf + 0x74 * -0x9 + -0x2b * 0x29)[_0x3ec2ac(0x219)](_0x2bf16d);
};
exports[_0x417932(0x206)] = show;
const remove = async (_0x1eccc1, _0x1a5e46) => {
    const _0x15d67f = _0x417932, _0x550857 = {};
    _0x550857[_0x15d67f(0x20c)] = _0x15d67f(0x217), _0x550857[_0x15d67f(0x1f7)] = _0x15d67f(0x23d) + 'ed';
    const _0x19f253 = _0x550857, {id: _0x2455e2} = _0x1eccc1[_0x15d67f(0x236)], {companyId: _0x19e392} = _0x1eccc1[_0x15d67f(0x1ff)];
    await (0x251b + 0xce0 + -0x31fb, DeleteService_1[_0x15d67f(0x227)])(_0x2455e2);
    const _0x50bb8b = (0x25ea + 0x254 + -0x25e * 0x11, socket_1[_0x15d67f(0x22c)])(), _0x21e8bb = {};
    _0x21e8bb[_0x15d67f(0x22a)] = _0x19f253[_0x15d67f(0x20c)], _0x21e8bb['id'] = _0x2455e2, _0x50bb8b[_0x15d67f(0x1f9)](_0x15d67f(0x1f3) + _0x19e392 + _0x15d67f(0x214), _0x21e8bb);
    const _0x36cf45 = {};
    return _0x36cf45[_0x15d67f(0x20f)] = _0x19f253[_0x15d67f(0x1f7)], _0x1a5e46[_0x15d67f(0x1e7)](0x2c * -0x65 + 0x1e85 + 0x1 * -0xc61)[_0x15d67f(0x219)](_0x36cf45);
};
exports[_0x417932(0x23f)] = remove;
const saveMessage = async (_0x3848d6, _0x57c533) => {
    const _0x5957f1 = _0x417932, _0xaeefe6 = {};
    _0xaeefe6[_0x5957f1(0x21d)] = _0x5957f1(0x210), _0xaeefe6[_0x5957f1(0x240)] = _0x5957f1(0x1f4), _0xaeefe6[_0x5957f1(0x239)] = _0x5957f1(0x211) + 'e';
    const _0x5aaefe = _0xaeefe6, {companyId: _0x232ece} = _0x3848d6[_0x5957f1(0x1ff)], {message: _0x2549bf} = _0x3848d6[_0x5957f1(0x23a)], {id: _0x220db1} = _0x3848d6[_0x5957f1(0x236)], _0x79204b = +_0x3848d6[_0x5957f1(0x1ff)]['id'], _0xde8d0a = +_0x220db1, _0x49cf4f = {};
    _0x49cf4f[_0x5957f1(0x1fc)] = _0xde8d0a, _0x49cf4f[_0x5957f1(0x1fe)] = _0x79204b, _0x49cf4f[_0x5957f1(0x20f)] = _0x2549bf;
    const _0x378de0 = await (0x7 * -0x7 + 0x2fc * 0x6 + 0x1 * -0x11b7, CreateMessageService_1[_0x5957f1(0x227)])(_0x49cf4f), _0x31cb2c = {};
    _0x31cb2c[_0x5957f1(0x205)] = User_1[_0x5957f1(0x227)], _0x31cb2c['as'] = _0x5aaefe[_0x5957f1(0x21d)];
    const _0x502f89 = {};
    _0x502f89[_0x5957f1(0x205)] = ChatUser_1[_0x5957f1(0x227)], _0x502f89['as'] = _0x5aaefe[_0x5957f1(0x240)];
    const _0x5b76bb = {};
    _0x5b76bb[_0x5957f1(0x223)] = [
        _0x31cb2c,
        _0x502f89
    ];
    const _0x2bd073 = await Chat_1[_0x5957f1(0x227)][_0x5957f1(0x226)](_0xde8d0a, _0x5b76bb), _0x247c35 = (-0xa * 0x1b5 + -0x1ba9 + 0xb * 0x411, socket_1[_0x5957f1(0x22c)])(), _0x409d30 = {};
    _0x409d30[_0x5957f1(0x22a)] = _0x5aaefe[_0x5957f1(0x239)], _0x409d30[_0x5957f1(0x235)] = _0x378de0, _0x409d30[_0x5957f1(0x20b)] = _0x2bd073, _0x247c35[_0x5957f1(0x1f9)](_0x5957f1(0x1f3) + _0x232ece + _0x5957f1(0x1ea) + _0xde8d0a, _0x409d30);
    const _0x36532b = {};
    return _0x36532b[_0x5957f1(0x22a)] = _0x5aaefe[_0x5957f1(0x239)], _0x36532b[_0x5957f1(0x235)] = _0x378de0, _0x36532b[_0x5957f1(0x20b)] = _0x2bd073, _0x247c35[_0x5957f1(0x1f9)](_0x5957f1(0x1f3) + _0x232ece + _0x5957f1(0x214), _0x36532b), _0x57c533[_0x5957f1(0x219)](_0x378de0);
};
exports[_0x417932(0x228) + 'e'] = saveMessage;
const checkAsRead = async (_0x113ea8, _0x364939) => {
    const _0x57d145 = _0x417932, _0x3209e4 = {};
    _0x3209e4[_0x57d145(0x212)] = _0x57d145(0x210), _0x3209e4[_0x57d145(0x218)] = _0x57d145(0x1f4), _0x3209e4[_0x57d145(0x203)] = _0x57d145(0x237);
    const _0x4ebd95 = _0x3209e4, {companyId: _0x350d97} = _0x113ea8[_0x57d145(0x1ff)], {userId: _0x10a8bb} = _0x113ea8[_0x57d145(0x23a)], {id: _0x172c7e} = _0x113ea8[_0x57d145(0x236)], _0x57ed56 = {};
    _0x57ed56[_0x57d145(0x1fc)] = _0x172c7e, _0x57ed56[_0x57d145(0x231)] = _0x10a8bb;
    const _0x1a9549 = {};
    _0x1a9549[_0x57d145(0x22d)] = _0x57ed56;
    const _0x110ea0 = await ChatUser_1[_0x57d145(0x227)][_0x57d145(0x20a)](_0x1a9549), _0x1f1fa7 = {};
    _0x1f1fa7[_0x57d145(0x1e5)] = 0x0, await _0x110ea0[_0x57d145(0x237)](_0x1f1fa7);
    const _0x488024 = {};
    _0x488024[_0x57d145(0x205)] = User_1[_0x57d145(0x227)], _0x488024['as'] = _0x4ebd95[_0x57d145(0x212)];
    const _0x3a60f1 = {};
    _0x3a60f1[_0x57d145(0x205)] = ChatUser_1[_0x57d145(0x227)], _0x3a60f1['as'] = _0x4ebd95[_0x57d145(0x218)];
    const _0x499537 = {};
    _0x499537[_0x57d145(0x223)] = [
        _0x488024,
        _0x3a60f1
    ];
    const _0x138e94 = await Chat_1[_0x57d145(0x227)][_0x57d145(0x226)](_0x172c7e, _0x499537), _0x161ede = (-0x18 * 0x7f + 0x2399 + -0x17b1, socket_1[_0x57d145(0x22c)])(), _0x5a4224 = {};
    _0x5a4224[_0x57d145(0x22a)] = _0x4ebd95[_0x57d145(0x203)], _0x5a4224[_0x57d145(0x20b)] = _0x138e94, _0x161ede[_0x57d145(0x1f9)](_0x57d145(0x1f3) + _0x350d97 + _0x57d145(0x1ea) + _0x172c7e, _0x5a4224);
    const _0x1fdc2f = {};
    return _0x1fdc2f[_0x57d145(0x22a)] = _0x4ebd95[_0x57d145(0x203)], _0x1fdc2f[_0x57d145(0x20b)] = _0x138e94, _0x161ede[_0x57d145(0x1f9)](_0x57d145(0x1f3) + _0x350d97 + _0x57d145(0x214), _0x1fdc2f), _0x364939[_0x57d145(0x219)](_0x138e94);
};
exports[_0x417932(0x23c) + 'd'] = checkAsRead;
const messages = async (_0x4f9215, _0x4ebd2c) => {
    const _0x192991 = _0x417932, {pageNumber: _0x14d3c6} = _0x4f9215[_0x192991(0x202)], {id: _0xaec8df} = _0x4f9215[_0x192991(0x236)], _0x210b87 = +_0x4f9215[_0x192991(0x1ff)]['id'], _0x4a482c = {};
    _0x4a482c[_0x192991(0x1fc)] = _0xaec8df, _0x4a482c[_0x192991(0x232)] = _0x210b87, _0x4a482c[_0x192991(0x1fb)] = _0x14d3c6;
    const {
            records: _0x5ecdb6,
            count: _0x502b97,
            hasMore: _0x4022d8
        } = await (-0x83c + -0xf * -0x233 + 0x18c1 * -0x1, FindMessages_1[_0x192991(0x227)])(_0x4a482c), _0x26a42e = {};
    return _0x26a42e[_0x192991(0x241)] = _0x5ecdb6, _0x26a42e[_0x192991(0x1fa)] = _0x502b97, _0x26a42e[_0x192991(0x21a)] = _0x4022d8, _0x4ebd2c[_0x192991(0x219)](_0x26a42e);
};
exports[_0x417932(0x213)] = messages;